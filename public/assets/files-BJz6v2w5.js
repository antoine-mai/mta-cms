import{d as e,m as t,p as n,t as r}from"./react-vendor-DweroVZ6.js";import{r as i}from"./index-C4IdCPQI.js";import{t as a}from"./header-y5TsIIRS.js";import"./monaco-vendor-Bo5OUYwx.js";var o=t(),s=n(),c=e();function l({isOpen:e,onClose:t,anchorRef:n,onRename:r,onDownload:i,onDelete:a,onEdit:l,isDirectory:u,onNewFolder:d,onNewFile:f,onUpload:p,onCopy:m,onCut:h,onCompress:g,onExtract:_}){let v=(0,o.useRef)(null);if((0,o.useEffect)(()=>{let r=e=>{v.current&&!v.current.contains(e.target)&&n.current&&!n.current.contains(e.target)&&t()};return e&&document.addEventListener(`mousedown`,r),()=>{document.removeEventListener(`mousedown`,r)}},[e,t]),!e||!n.current)return null;let y=n.current.getBoundingClientRect();return(0,s.createPortal)((0,c.jsx)(`div`,{ref:v,style:{position:`fixed`,top:y.bottom+4,left:y.right-148,zIndex:9999},className:`w-40 bg-card-bg rounded-lg shadow-xl border border-border-light animate-in fade-in zoom-in-95 duration-100 overflow-hidden text-left`,children:(0,c.jsxs)(`div`,{className:`py-1`,children:[u&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(`button`,{className:`w-full flex items-center gap-2 px-3 py-1.5 text-xs text-text-main hover:bg-background-light text-left transition-colors`,onClick:e=>{e.stopPropagation(),d?.(),t()},children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[14px] text-text-secondary`,children:`create_new_folder`}),`New Folder`]}),(0,c.jsxs)(`button`,{className:`w-full flex items-center gap-2 px-3 py-1.5 text-xs text-text-main hover:bg-background-light text-left transition-colors`,onClick:e=>{e.stopPropagation(),f?.(),t()},children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[14px] text-text-secondary`,children:`note_add`}),`New File`]}),(0,c.jsxs)(`button`,{className:`w-full flex items-center gap-2 px-3 py-1.5 text-xs text-text-main hover:bg-background-light text-left transition-colors border-b border-border-light mb-1`,onClick:e=>{e.stopPropagation(),p?.(),t()},children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[14px] text-text-secondary`,children:`upload`}),`Upload`]})]}),!u&&(0,c.jsxs)(`button`,{className:`w-full flex items-center gap-2 px-3 py-1.5 text-xs text-text-main hover:bg-background-light text-left transition-colors`,onClick:e=>{e.stopPropagation(),l?.(),t()},children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[14px] text-text-secondary`,children:`edit_note`}),`Edit`]}),(0,c.jsxs)(`button`,{className:`w-full flex items-center gap-2 px-3 py-1.5 text-xs text-text-main hover:bg-background-light text-left transition-colors`,onClick:e=>{e.stopPropagation(),m?.(),t()},children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[14px] text-text-secondary`,children:`content_copy`}),`Copy`]}),(0,c.jsxs)(`button`,{className:`w-full flex items-center gap-2 px-3 py-1.5 text-xs text-text-main hover:bg-background-light text-left transition-colors`,onClick:e=>{e.stopPropagation(),h?.(),t()},children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[14px] text-text-secondary`,children:`content_cut`}),`Cut`]}),(0,c.jsx)(`div`,{className:`my-1 border-t border-border-light`}),(0,c.jsxs)(`button`,{className:`w-full flex items-center gap-2 px-3 py-1.5 text-xs text-text-main hover:bg-background-light text-left transition-colors`,onClick:e=>{e.stopPropagation(),g?.(),t()},children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[14px] text-text-secondary`,children:`archive`}),`Compress`]}),_&&(0,c.jsxs)(`button`,{className:`w-full flex items-center gap-2 px-3 py-1.5 text-xs text-text-main hover:bg-background-light text-left transition-colors`,onClick:e=>{e.stopPropagation(),_(),t()},children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[14px] text-text-secondary`,children:`unarchive`}),`Extract`]}),(0,c.jsx)(`div`,{className:`my-1 border-t border-border-light`}),(0,c.jsxs)(`button`,{className:`w-full flex items-center gap-2 px-3 py-1.5 text-xs text-text-main hover:bg-background-light text-left transition-colors`,onClick:e=>{e.stopPropagation(),r?.(),t()},children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[14px] text-text-secondary`,children:`edit`}),`Rename`]}),(0,c.jsxs)(`button`,{className:`w-full flex items-center gap-2 px-3 py-1.5 text-xs text-text-main hover:bg-background-light text-left transition-colors`,onClick:e=>{e.stopPropagation(),i?.(),t()},children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[14px] text-text-secondary`,children:`download`}),`Download`]}),(0,c.jsxs)(`button`,{className:`w-full flex items-center gap-2 px-3 py-1.5 text-xs text-red-600 hover:bg-red-50 text-left transition-colors`,onClick:e=>{e.stopPropagation(),a?.(),t()},children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[14px]`,children:`delete`}),`Delete`]})]})}),document.body)}const u={async fetchFolder(e){return await(await fetch(`/post/tools/files`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({path:e})})).json()},async rename(e,t){return await(await fetch(`/post/tools/files/rename`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({old_path:e,new_path:t})})).json()},async delete(e){return await(await fetch(`/post/tools/files/delete`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({path:e})})).json()},async mkdir(e,t){return await(await fetch(`/post/tools/files/mkdir`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({parent_path:e,name:t})})).json()},async create(e,t){return await(await fetch(`/post/tools/files/create`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({parent_path:e,name:t})})).json()},async readFile(e){return await(await fetch(`/post/tools/files/read`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({path:e})})).json()},async saveFile(e,t){return await(await fetch(`/post/tools/files/save`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({path:e,content:t})})).json()},async search(e,t){return await(await fetch(`/post/tools/files/search`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({path:e,query:t})})).json()},async copy(e,t){return await(await fetch(`/post/tools/files/copy`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({source_path:e,dest_path:t})})).json()},async compress(e,t,n,r){return await(await fetch(`/post/tools/files/compress`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({parent_dir:e,items:t,dest_name:n,format:r})})).json()},async extract(e,t){return await(await fetch(`/post/tools/files/extract`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({archive_path:e,dest_dir:t})})).json()}},d={joinPath(e,t){return`${e}${e.endsWith(`/`)?``:`/`}${t}`.replace(`//`,`/`)},getParentPath(e){return e.substring(0,e.lastIndexOf(`/`))||``},formatSize(e){return e===0?`0 B`:e<1024?`${e} B`:`${(e/1024).toFixed(1)} KB`},formatDate(e){return new Date(e).toLocaleString()},getLanguage(e){return{js:`javascript`,jsx:`javascript`,ts:`typescript`,tsx:`typescript`,html:`html`,css:`css`,json:`json`,php:`php`,go:`go`,py:`python`,rb:`ruby`,rs:`rust`,sh:`shell`,yml:`yaml`,yaml:`yaml`,md:`markdown`,sql:`sql`,xml:`xml`,bash:`shell`}[e.split(`.`).pop()?.toLowerCase()||``]||`plaintext`}};function f(e=``){let[t,n]=(0,o.useState)(e),[r,i]=(0,o.useState)([]),[a,s]=(0,o.useState)(!1),[c,l]=(0,o.useState)(!1),[f,p]=(0,o.useState)(null),[m,h]=(0,o.useState)(!0),[g,_]=(0,o.useState)(!1),[v,y]=(0,o.useState)(null),[b,x]=(0,o.useState)(`grid`),[S,C]=(0,o.useState)(null),[w,T]=(0,o.useState)(null),[E,D]=(0,o.useState)(!1),[O,k]=(0,o.useState)(!1),A=async(e,t=!1)=>{t||l(!0);try{let t=await u.fetchFolder(e);t.files&&(i(t.files),n(t.current_path),s(t.is_top_level||!1))}catch(e){console.error(`Failed to load folder`,e)}finally{t||l(!1)}};(0,o.useEffect)(()=>{let e=setInterval(()=>{t&&!c&&A(t,!0)},15e3);return()=>clearInterval(e)},[t,c]),(0,o.useEffect)(()=>{let e=()=>{A(t)};return window.addEventListener(`files-changed`,e),()=>window.removeEventListener(`files-changed`,e)},[t]);let j=async e=>{let{action:n,name:r}=e,i=S?.target;if(!(!i&&(n===`rename`||n===`delete`))){try{let e=t;i&&(e=i.path===void 0?d.joinPath(t,i.name||``):i.path);let a;if(n===`rename`){let t=d.getParentPath(e),n=d.joinPath(t,r);a=await u.rename(e,n)}else n===`delete`?a=await u.delete(e):n===`new-folder`?a=await u.mkdir(e,r):n===`new-file`&&(a=await u.create(e,r));a&&a.error?alert(a.error):((n===`delete`||n===`rename`)&&f&&(f.path||d.joinPath(t,f.name))===e&&(T(null),p(null)),window.dispatchEvent(new CustomEvent(`files-changed`,{detail:{path:e,action:n}})),A(t))}catch(e){console.error(`File action failed:`,e),alert(`An error occurred. Please try again.`)}C(null)}},M=async e=>{D(!0);try{let n=e.path||d.joinPath(t,e.name);p({...e,path:n});let r=await u.readFile(n);r.error?alert(r.error):(T(r.content),k(r.is_image))}catch(e){console.error(`Failed to read file`,e),alert(`Failed to read file content.`)}finally{D(!1)}},N=e=>{T(null),p(null),A(e)},[P,F]=(0,o.useState)(``),[I,L]=(0,o.useState)(null);(0,o.useEffect)(()=>{if(!P.trim()){L(null);return}let e=setTimeout(async()=>{l(!0);try{L((await u.search(t,P)).files||[])}catch(e){console.error(`Search failed`,e)}finally{l(!1)}},300);return()=>clearTimeout(e)},[P,t]);let R=(0,o.useMemo)(()=>[...I===null?r:I].filter(e=>g||!e.name.startsWith(`.`)).sort((e,t)=>m?e.is_dir===t.is_dir?e.name.localeCompare(t.name):e.is_dir?-1:1:e.name.localeCompare(t.name)),[r,I,g,m]),z=(0,o.useMemo)(()=>t.split(`/`).filter(e=>e),[t]);(0,o.useEffect)(()=>{A(e)},[e]);let B=async e=>{if(f){D(!0);try{let n=f.path||d.joinPath(t,f.name),r=await u.saveFile(n,e);r.error?alert(r.error):T(e)}catch(e){console.error(`Failed to save file`,e),alert(`Failed to save file.`)}finally{D(!1)}}},[V,H]=(0,o.useState)(null);return{currentPath:t,files:r,loading:c,selectedFile:f,setSelectedFile:p,showFoldersFirst:m,setShowFoldersFirst:h,showHiddenFiles:g,setShowHiddenFiles:_,openMenuFile:v,setOpenMenuFile:y,viewMode:b,setViewMode:x,actionModal:S,setActionModal:C,fileContent:w,setFileContent:T,isFileLoading:E,isImage:O,handleActionConfirm:j,handleNavigate:N,openFile:M,handleSaveFile:B,displayedFiles:R,pathParts:z,searchQuery:P,setSearchQuery:F,isTopLevel:a,clipboard:V,handleCopy:e=>{H({path:e,mode:`copy`})},handleCut:e=>{H({path:e,mode:`cut`})},handlePaste:async()=>{if(V)try{let e=V.path.split(`/`).pop()||`unknown`,n=d.joinPath(t,e);l(!0),V.mode===`copy`?await u.copy(V.path,n):(await u.rename(V.path,n),H(null)),A(t)}catch(e){console.error(`Paste failed`,e),alert(`Paste failed`)}finally{l(!1)}},handleCompress:async(e,n,r)=>{l(!0);try{await u.compress(t,e,n,r),A(t)}catch(e){console.error(`Compress failed`,e),alert(`Compress failed`)}finally{l(!1)}},handleExtract:async e=>{l(!0);try{await u.extract(e,t),A(t)}catch(e){console.error(`Extract failed`,e),alert(`Extract failed`)}finally{l(!1)}}}}var p=(0,o.createContext)(null);function m({children:e,initialPath:t}){let n=f(t);return(0,c.jsx)(p.Provider,{value:n,children:e})}function h(){let e=(0,o.useContext)(p);if(!e)throw Error(`useFileExplorer must be used within a FileExplorerProvider`);return e}const g=async(e,t)=>{let n=document.createElement(`input`);n.type=`file`,n.onchange=async n=>{let r=n.target.files?.[0];if(!r)return;let i=new FormData;i.append(`file`,r),i.append(`path`,e);try{if(!(await fetch(`/post/files/upload`,{method:`POST`,body:i})).ok)throw Error(`Upload failed`);t?.()}catch(e){console.error(`Upload error:`,e),alert(`Failed to upload file`)}},n.click()};var _=({name:e,path:t,is_dir:n,level:r})=>{let{handleNavigate:i,openFile:a,setActionModal:s,showHiddenFiles:f}=h(),[p,m]=(0,o.useState)(!1),[g,v]=(0,o.useState)([]),[y,b]=(0,o.useState)(!1),[x,S]=(0,o.useState)([]),C=async()=>{try{let e=await u.fetchFolder(t);e.files&&S(e.files.map(e=>({...e,path:d.joinPath(t,e.name)}))),b(!0)}catch(e){console.error(`Failed to load folder`,e)}},w=async e=>{e.stopPropagation(),n&&(m(!p),!y&&!p&&C())};(0,o.useEffect)(()=>{let e=()=>{p&&C()};return window.addEventListener(`files-changed`,e),()=>window.removeEventListener(`files-changed`,e)},[p,t]),(0,o.useEffect)(()=>{x.length>0&&v(x.filter(e=>f||!e.name.startsWith(`.`)))},[f,x]);let[T,E]=(0,o.useState)(!1),D=(0,o.useRef)(null),O={name:e,path:t,is_dir:n};return(0,c.jsxs)(`div`,{className:`select-none`,children:[(0,c.jsxs)(`div`,{className:`flex items-center gap-2 py-1 px-2 rounded-lg cursor-pointer transition-all hover:bg-background-light group`,onClick:()=>{n?i(t):a(O)},children:[(0,c.jsx)(`div`,{onClick:w,className:`p-0.5 flex items-center justify-center ${n?``:`invisible`}`,children:(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[18px] text-text-muted transition-transform ${p?`rotate-90`:``}`,children:`chevron_right`})}),(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[20px] leading-none ${n?`text-amber-500`:`text-blue-500`}`,style:n?{fontVariationSettings:`'FILL' 1`}:{},children:n?`folder`:`description`}),(0,c.jsx)(`span`,{className:`text-sm whitespace-nowrap pt-0.5`,children:e}),(0,c.jsxs)(`div`,{className:`relative ml-auto`,children:[(0,c.jsx)(`button`,{ref:D,className:`p-0.5 rounded flex items-center justify-center transition-opacity ${T?`opacity-100 text-text-main`:`text-text-secondary opacity-0 group-hover:opacity-100 hover:text-text-main`}`,onClick:e=>{e.stopPropagation(),E(!T)},children:(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[16px]`,children:`more_horiz`})}),(0,c.jsx)(l,{isOpen:T,onClose:()=>E(!1),anchorRef:D,isDirectory:n,onEdit:()=>a(O),onRename:()=>s({type:`rename`,target:O}),onDelete:()=>s({type:`delete`,target:O}),onNewFolder:()=>s({type:`new-folder`,target:O}),onNewFile:()=>s({type:`new-file`,target:O}),onDownload:()=>console.log(`Download`,e)})]})]}),p&&n&&(0,c.jsxs)(`div`,{className:`flex flex-col ml-4 pl-2 border-l border-border-light`,children:[g.map(e=>(0,c.jsx)(_,{name:e.name,path:e.path,is_dir:e.is_dir,level:r+1},e.path)),g.length===0&&y&&(0,c.jsx)(`div`,{className:`ml-4 pl-4 py-1 text-xs text-text-muted italic`,children:`Empty`})]})]})};function v({hideHeader:e,initialPath:t}){let{setActionModal:n,showFoldersFirst:r,setShowFoldersFirst:i,showHiddenFiles:a,setShowHiddenFiles:s}=h(),[l,f]=(0,o.useState)([]),[p,m]=(0,o.useState)(!1),[v,y]=(0,o.useState)(``),b=(0,o.useRef)(null);(0,o.useEffect)(()=>{function e(e){b.current&&!b.current.contains(e.target)&&m(!1)}return document.addEventListener(`mousedown`,e),()=>{document.removeEventListener(`mousedown`,e)}},[]);let x=async()=>{try{let e=await u.fetchFolder(t||``);e.files&&(f(e.files.map(t=>({...t,path:d.joinPath(e.current_path,t.name)}))),y(e.current_path))}catch(e){console.error(`Failed to fetch root files`,e)}};(0,o.useEffect)(()=>{x()},[t]),(0,o.useEffect)(()=>{let e=()=>{x()};return window.addEventListener(`files-changed`,e),()=>window.removeEventListener(`files-changed`,e)},[]);let S=l.filter(e=>a||!e.name.startsWith(`.`));return(0,c.jsxs)(`aside`,{className:`w-[280px] bg-sidebar-wide border-r border-border-light flex flex-col shrink-0 hidden md:flex`,children:[!e&&(0,c.jsxs)(`div`,{className:`h-12 flex items-center justify-between px-4 border-b border-border-light shrink-0 relative`,ref:b,children:[(0,c.jsx)(`h2`,{className:`text-text-main text-lg font-bold tracking-tight`,children:`Files`}),(0,c.jsx)(`div`,{className:`flex items-center gap-1`,children:(0,c.jsx)(`button`,{className:`text-text-secondary hover:text-primary transition-colors p-1 rounded-md hover:bg-background-light flex items-center justify-center ${p?`bg-background-light text-primary`:``}`,onClick:()=>m(!p),children:(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[20px] leading-none`,children:`settings`})})}),p&&(0,c.jsx)(`div`,{className:`absolute right-2 top-full mt-1 w-48 bg-card-bg rounded-lg shadow-xl border border-border-light z-50 animate-in fade-in slide-in-from-top-2 duration-200 overflow-hidden`,children:(0,c.jsxs)(`div`,{className:`py-1`,children:[(0,c.jsxs)(`button`,{className:`w-full flex items-center gap-2 px-4 py-2 text-sm text-text-main hover:bg-background-light text-left transition-colors`,onClick:()=>{n({type:`new-folder`,target:{path:``,name:``}}),m(!1)},children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[18px] text-text-secondary`,children:`create_new_folder`}),`New Folder`]}),(0,c.jsxs)(`button`,{className:`w-full flex items-center gap-2 px-4 py-2 text-sm text-text-main hover:bg-background-light text-left transition-colors`,onClick:()=>{n({type:`new-file`,target:{path:``,name:``}}),m(!1)},children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[18px] text-text-secondary`,children:`note_add`}),`New File`]}),(0,c.jsxs)(`button`,{className:`w-full flex items-center gap-2 px-4 py-2 text-sm text-text-main hover:bg-background-light text-left transition-colors`,onClick:()=>{g(v,x),m(!1)},children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[18px] text-text-secondary`,children:`upload`}),`Upload`]}),(0,c.jsx)(`div`,{className:`border-t border-border-light my-1`}),(0,c.jsxs)(`button`,{className:`w-full flex items-center gap-2 px-4 py-2 text-sm text-text-main hover:bg-background-light text-left transition-colors`,onClick:()=>s(!a),children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[18px] text-text-secondary`,children:a?`visibility_off`:`visibility`}),a?`Hide Hidden Files`:`Show Hidden Files`]}),(0,c.jsxs)(`button`,{className:`w-full flex items-center gap-2 px-4 py-2 text-sm text-text-main hover:bg-background-light text-left transition-colors`,onClick:()=>{i(!r),m(!1)},children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[18px] text-text-secondary`,children:r?`check_box`:`check_box_outline_blank`}),`Show Folders First`]})]})})]}),(0,c.jsx)(`div`,{className:`flex-1 overflow-hidden flex flex-col`,children:(0,c.jsx)(`div`,{className:`flex-1 overflow-x-auto overflow-y-auto p-4`,children:(0,c.jsx)(`div`,{className:`space-y-1 min-w-max`,children:S.map(e=>(0,c.jsx)(_,{name:e.name,path:e.path,is_dir:e.is_dir,level:0},e.path))})})})]})}var y=()=>{let{searchQuery:e,setSearchQuery:t}=h();return(0,c.jsxs)(`div`,{className:`flex items-center bg-background-light rounded-lg px-3 h-8 border border-border-light w-72 transition-colors focus-within:ring-0 focus-within:border-primary`,children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-text-secondary text-[20px]`,children:`search`}),(0,c.jsx)(`input`,{className:`bg-transparent border-none text-[13px] text-text-main focus:ring-0 w-full placeholder-text-secondary p-0 ml-2 font-normal focus:outline-none`,placeholder:`Search files...`,type:`text`,value:e,onChange:e=>t(e.target.value)})]})},b=n();const x=({isOpen:e,onClose:t,title:n,children:r,onConfirm:i,confirmText:a=`Confirm`,confirmColor:o=`primary`,isLoading:s=!1})=>e?(0,b.createPortal)((0,c.jsx)(`div`,{className:`fixed inset-0 z-[10000] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200 cursor-pointer`,onClick:t,children:(0,c.jsxs)(`div`,{className:`bg-card-bg border border-border-light w-full max-w-[400px] rounded-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 cursor-default`,onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)(`div`,{className:`flex items-center justify-between px-6 py-4 border-b border-border-light bg-background-light/30`,children:[(0,c.jsx)(`h3`,{className:`font-bold text-text-main`,children:n}),(0,c.jsx)(`button`,{onClick:t,className:`text-text-muted hover:text-text-main transition-colors`,children:(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[22px]`,children:`close`})})]}),(0,c.jsx)(`div`,{className:`p-6`,children:r}),(0,c.jsxs)(`div`,{className:`flex items-center justify-end gap-3 px-6 py-4 border-t border-border-light bg-background-light/30`,children:[(0,c.jsx)(`button`,{onClick:t,className:`px-4 py-2 text-sm font-bold text-text-secondary hover:bg-background-light rounded-xl transition-all`,children:`Cancel`}),(0,c.jsxs)(`button`,{onClick:i,disabled:s,className:`px-5 py-2 text-sm font-bold text-white rounded-xl shadow-lg transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 ${o===`red`?`bg-red-600 hover:bg-red-700 shadow-red-600/20`:`bg-primary hover:bg-primary-hover shadow-primary/20`}`,children:[s&&(0,c.jsx)(`span`,{className:`material-symbols-outlined animate-spin text-[18px]`,children:`progress_activity`}),a]})]})]})}),document.body):null;function S({isOpen:e,onClose:t,onConfirm:n,currentName:r,isLoading:i}){let[a,s]=(0,o.useState)(r),l=(0,o.useRef)(null);(0,o.useEffect)(()=>{e&&(s(r),setTimeout(()=>l.current?.focus(),100))},[e,r]);let u=()=>{a.trim()&&a!==r&&n(a)};return(0,c.jsx)(x,{isOpen:e,onClose:t,onConfirm:u,title:`Rename Item`,confirmText:`Rename`,isLoading:i,children:(0,c.jsxs)(`div`,{className:`space-y-1.5`,children:[(0,c.jsx)(`label`,{className:`text-[11px] font-bold text-text-muted uppercase tracking-wider ml-1`,children:`New Name`}),(0,c.jsx)(`input`,{ref:l,type:`text`,value:a,onChange:e=>s(e.target.value),onKeyDown:e=>e.key===`Enter`&&u(),className:`w-full bg-background-light border border-border-light rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all`})]})})}function C({isOpen:e,onClose:t,onConfirm:n,itemName:r,isLoading:i}){return(0,c.jsx)(x,{isOpen:e,onClose:t,onConfirm:n,title:`Delete Item`,confirmText:`Delete`,confirmColor:`red`,isLoading:i,children:(0,c.jsxs)(`div`,{className:`flex flex-col items-center text-center py-2`,children:[(0,c.jsx)(`div`,{className:`size-16 rounded-full bg-red-500/10 flex items-center justify-center mb-4`,children:(0,c.jsx)(`span`,{className:`material-symbols-outlined text-red-600 text-[32px]`,children:`delete_forever`})}),(0,c.jsxs)(`p`,{className:`text-sm text-text-main`,children:[`Are you sure you want to delete `,(0,c.jsx)(`span`,{className:`font-bold`,children:r}),`?`]}),(0,c.jsx)(`p`,{className:`text-[12px] text-text-muted mt-2`,children:`This action cannot be undone and all data will be lost.`})]})})}function w({isOpen:e,onClose:t,onConfirm:n,isLoading:r}){let[i,a]=(0,o.useState)(``),s=(0,o.useRef)(null);(0,o.useEffect)(()=>{e&&(a(``),setTimeout(()=>s.current?.focus(),100))},[e]);let l=()=>{i.trim()&&n(i)};return(0,c.jsx)(x,{isOpen:e,onClose:t,onConfirm:l,title:`Create New Folder`,confirmText:`Create`,isLoading:r,children:(0,c.jsxs)(`div`,{className:`space-y-1.5`,children:[(0,c.jsx)(`label`,{className:`text-[11px] font-bold text-text-muted uppercase tracking-wider ml-1`,children:`Folder Name`}),(0,c.jsxs)(`div`,{className:`relative`,children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-muted text-[18px]`,children:`folder`}),(0,c.jsx)(`input`,{ref:s,type:`text`,value:i,onChange:e=>a(e.target.value),onKeyDown:e=>e.key===`Enter`&&l(),placeholder:`New folder name`,className:`w-full bg-background-light border border-border-light rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all`})]})]})})}function T({isOpen:e,onClose:t,onConfirm:n,isLoading:r}){let[i,a]=(0,o.useState)(``),s=(0,o.useRef)(null);(0,o.useEffect)(()=>{e&&(a(``),setTimeout(()=>s.current?.focus(),100))},[e]);let l=()=>{i.trim()&&n(i)};return(0,c.jsx)(x,{isOpen:e,onClose:t,onConfirm:l,title:`Create New File`,confirmText:`Create`,isLoading:r,children:(0,c.jsxs)(`div`,{className:`space-y-1.5`,children:[(0,c.jsx)(`label`,{className:`text-[11px] font-bold text-text-muted uppercase tracking-wider ml-1`,children:`File Name`}),(0,c.jsxs)(`div`,{className:`relative`,children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-muted text-[18px]`,children:`article`}),(0,c.jsx)(`input`,{ref:s,type:`text`,value:i,onChange:e=>a(e.target.value),onKeyDown:e=>e.key===`Enter`&&l(),placeholder:`example.txt`,className:`w-full bg-background-light border border-border-light rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all`})]})]})})}const E=()=>{let{selectedFile:e,fileContent:t,setFileContent:n,isFileLoading:a,isImage:s,handleSaveFile:l}=h(),u=(0,o.useRef)(null),{theme:f}=i(),p=(f===`system`?window.matchMedia(`(prefers-color-scheme: dark)`).matches?`dark`:`light`:f)===`dark`?`vs-dark`:`vs`;return(0,c.jsx)(`div`,{className:`flex-1 overflow-y-auto bg-background-main flex flex-col`,children:(0,c.jsxs)(`div`,{className:`flex-1 flex flex-col p-6 lg:p-8 w-full max-w-7xl mx-auto`,children:[(0,c.jsxs)(`div`,{className:`flex items-center justify-between mb-4 border-b border-border-light pb-2`,children:[(0,c.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[20px] pt-1 ${s?`text-purple-500`:`text-blue-500`}`,children:s?`image`:e?.icon||`description`}),(0,c.jsx)(`span`,{className:`font-bold text-base text-text-main pt-0.5`,children:e?.name})]}),(0,c.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,c.jsxs)(`button`,{onClick:()=>n(null),disabled:a,className:`h-8 px-3 text-[11px] font-bold text-text-secondary hover:bg-background-light rounded transition-all border border-border-light flex items-center gap-1.5 whitespace-nowrap disabled:opacity-50`,children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[16px]`,children:`close`}),`CLOSE`]}),!s&&(0,c.jsxs)(`button`,{onClick:()=>{u.current&&l(u.current.getValue())},disabled:a,className:`h-8 px-3 bg-primary text-white rounded text-[11px] font-bold shadow-sm hover:bg-primary-hover transition-all flex items-center gap-1.5 border border-primary whitespace-nowrap disabled:opacity-50`,children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[16px]`,children:a?`progress_activity`:`save`}),a?`SAVING...`:`SAVE`]})]})]}),(0,c.jsx)(`div`,{className:`flex-1 overflow-hidden border border-border-light rounded bg-card-bg flex items-center justify-center`,children:a&&s?(0,c.jsx)(`span`,{className:`material-symbols-outlined animate-spin text-primary text-4xl`,children:`progress_activity`}):s?(0,c.jsx)(`img`,{src:t,alt:`Preview`,className:`max-w-full max-h-full object-contain`}):(0,c.jsx)(r,{height:`100%`,language:d.getLanguage(e?.name||``),theme:p,path:e?.name,value:t||``,onMount:e=>{u.current=e},options:{minimap:{enabled:!1},fontSize:14,readOnly:!1,automaticLayout:!0,padding:{top:16},scrollbar:{vertical:`visible`,horizontal:`visible`,useShadows:!1,verticalSliderSize:10,horizontalSliderSize:10}}})})]})})},D=e=>{let t=(0,o.useRef)(null);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(`button`,{ref:t,className:`p-1 rounded-md text-text-secondary hover:text-text-main transition-colors ${e.isOpen?`text-text-main`:``}`,onClick:t=>{t.stopPropagation(),e.onToggle()},children:(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[20px]`,children:`more_vert`})}),(0,c.jsx)(l,{isOpen:e.isOpen,onClose:e.onClose,anchorRef:t,onRename:e.onRename,onDelete:e.onDelete,onDownload:e.onDownload,onEdit:e.onEdit,isDirectory:e.isDirectory,onNewFolder:e.onNewFolder,onNewFile:e.onNewFile,onUpload:e.onUpload,onCopy:e.onCopy,onCut:e.onCut,onCompress:e.onCompress,onExtract:e.onExtract})]})},O=()=>{let{currentPath:e,loading:t,selectedFile:n,setSelectedFile:r,openMenuFile:i,setOpenMenuFile:a,viewMode:o,setViewMode:s,setActionModal:l,handleNavigate:u,openFile:f,displayedFiles:p,pathParts:m,searchQuery:_,isTopLevel:v,clipboard:y,handleCopy:b,handleCut:x,handlePaste:S,handleCompress:C,handleExtract:w}=h(),T=t=>{t.is_dir?u(d.joinPath(e,t.name)):f(t)},E=e=>{let t=prompt(`Enter archive name (e.g. archive.zip):`,`${e.name}.zip`);if(t){let n=t.endsWith(`.tar.gz`)||t.endsWith(`.tgz`)?`tar.gz`:t.endsWith(`.tar`)?`tar`:`zip`;C([e.name],t,n)}};return(0,c.jsx)(`div`,{className:`flex-1 overflow-y-auto p-6 lg:p-8`,onClick:()=>r(null),children:(0,c.jsx)(`div`,{className:`max-w-7xl mx-auto`,children:(0,c.jsxs)(`section`,{children:[(0,c.jsxs)(`div`,{className:`flex items-center justify-between mb-6`,children:[(0,c.jsxs)(`div`,{className:`flex flex-col gap-1`,children:[(0,c.jsx)(`h3`,{className:`text-text-main font-bold text-base`,children:`Current Path`}),(0,c.jsxs)(`div`,{className:`flex items-center gap-1 text-xs text-text-muted`,children:[(0,c.jsx)(`span`,{children:`root`}),m.map((e,t)=>(0,c.jsxs)(`span`,{className:`flex items-center gap-1`,children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[14px]`,children:`chevron_right`}),(0,c.jsx)(`span`,{className:`hover:text-primary cursor-pointer transition-colors`,onClick:e=>{e.stopPropagation(),u(`/`+m.slice(0,t+1).join(`/`))},children:e})]},t))]})]}),(0,c.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,c.jsxs)(`div`,{className:`text-[13px] text-text-muted font-medium`,children:[p.length,` items`]}),(0,c.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,c.jsxs)(`div`,{className:`flex p-0.5 rounded-md`,children:[(0,c.jsx)(`button`,{onClick:e=>{e.stopPropagation(),s(`grid`)},className:`p-1.5 transition-all ${o===`grid`?`text-primary`:`text-text-secondary hover:text-text-main`}`,children:(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[20px] leading-none translate-y-[1px] block`,children:`grid_view`})}),(0,c.jsx)(`button`,{onClick:e=>{e.stopPropagation(),s(`list`)},className:`p-1.5 transition-all ${o===`list`?`text-primary`:`text-text-secondary hover:text-text-main`}`,children:(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[20px] leading-none translate-y-[0px] block`,children:`format_list_bulleted`})})]}),y&&(0,c.jsxs)(`button`,{onClick:e=>{e.stopPropagation(),S()},className:`flex items-center gap-1.5 px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white text-xs font-bold rounded-md transition-all shadow-sm`,title:`Paste ${y.mode===`cut`?`cut`:`copied`} item here`,children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[16px]`,children:`content_paste`}),`Paste`]}),(0,c.jsxs)(`button`,{onClick:t=>{t.stopPropagation(),g(e,()=>window.dispatchEvent(new CustomEvent(`files-changed`)))},className:`flex items-center gap-1.5 px-3 py-1.5 bg-primary hover:bg-primary-hover text-white text-xs font-bold rounded-md transition-all shadow-sm`,children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[16px]`,children:`upload`}),`Upload`]})]})]})]}),t?(0,c.jsx)(`div`,{className:`flex items-center justify-center py-20`,children:(0,c.jsx)(`span`,{className:`material-symbols-outlined animate-spin text-primary text-3xl`,children:`progress_activity`})}):o===`grid`?(0,c.jsxs)(`div`,{className:`grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4`,children:[!_&&!v&&(0,c.jsxs)(`div`,{className:`p-4 rounded-xl border bg-card-bg border-border-light hover:bg-primary/5 hover:border-primary/40 hover:shadow-md transition-all cursor-pointer group flex flex-col items-center justify-center text-center relative`,onClick:t=>{t.stopPropagation(),u(d.getParentPath(e))},children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[48px] text-text-muted mb-3`,children:`reply`}),(0,c.jsx)(`h4`,{className:`text-sm font-medium text-text-main truncate w-full px-2`,children:`..`}),(0,c.jsx)(`div`,{className:`text-xs text-text-secondary mt-1`,children:`Back`})]}),p.map((t,o)=>(0,c.jsxs)(`div`,{className:`p-4 rounded-xl border transition-all cursor-pointer group flex flex-col items-center justify-center text-center relative
                                            ${n?.name===t.name?`bg-primary/5 border-primary ring-1 ring-primary`:`bg-card-bg border-border-light hover:bg-primary/5 hover:border-primary/40 hover:shadow-md`}
                                        `,onClick:e=>{e.stopPropagation(),r(t)},onDoubleClick:e=>{e.stopPropagation(),T(t)},children:[(0,c.jsx)(`div`,{className:`absolute top-2 right-2 ${i===t.name?`opacity-100`:`opacity-0 group-hover:opacity-100`} transition-opacity`,children:(0,c.jsx)(D,{isOpen:i===t.name,onToggle:()=>a(i===t.name?null:t.name),onClose:()=>a(null),isDirectory:t.is_dir,onEdit:()=>f(t),onRename:()=>l({type:`rename`,target:t}),onDelete:()=>l({type:`delete`,target:t}),onNewFolder:()=>l({type:`new-folder`,target:t}),onNewFile:()=>l({type:`new-file`,target:t}),onDownload:()=>console.log(`Download`,t.name),onUpload:()=>g(d.joinPath(e,t.name),()=>window.dispatchEvent(new CustomEvent(`files-changed`))),onCopy:()=>b(t.path||d.joinPath(e,t.name)),onCut:()=>x(t.path||d.joinPath(e,t.name)),onCompress:()=>E(t),onExtract:!t.is_dir&&(t.name.endsWith(`.zip`)||t.name.endsWith(`.tar.gz`)||t.name.endsWith(`.tar`))?()=>w(t.path||d.joinPath(e,t.name)):void 0})}),t.is_dir?(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[48px] text-amber-500 mb-3`,style:{fontVariationSettings:`'FILL' 1`},children:`folder`}):(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[48px] mb-3 ${t.is_image?`text-purple-500`:`text-blue-500`}`,children:t.icon||`description`}),(0,c.jsx)(`h4`,{className:`text-sm font-medium text-text-main truncate w-full px-2`,title:t.name,children:t.name}),(0,c.jsx)(`div`,{className:`text-xs text-text-secondary mt-1`,children:t.is_dir?`Folder`:d.formatSize(t.size)})]},o)),p.length===0&&(0,c.jsx)(`div`,{className:`col-span-full py-10 text-center text-text-muted italic`,children:`This folder is empty`})]}):(0,c.jsxs)(`div`,{className:`flex flex-col border border-border-light overflow-hidden bg-card-bg`,children:[(0,c.jsxs)(`div`,{className:`grid grid-cols-[1fr,100px,100px,100px,80px,160px,40px] px-4 py-2 bg-background-light border-b border-border-light text-xs font-bold text-text-secondary uppercase tracking-wider`,children:[(0,c.jsx)(`div`,{children:`Name`}),(0,c.jsx)(`div`,{children:`Permission`}),(0,c.jsx)(`div`,{children:`Owner`}),(0,c.jsx)(`div`,{children:`Group`}),(0,c.jsx)(`div`,{children:`Size`}),(0,c.jsx)(`div`,{children:`Modified`}),(0,c.jsx)(`div`,{})]}),(0,c.jsxs)(`div`,{className:`divide-y divide-border-light`,children:[!_&&!v&&(0,c.jsxs)(`div`,{className:`grid grid-cols-[1fr,100px,100px,100px,80px,160px,40px] items-center px-4 py-2 transition-all cursor-pointer group hover:bg-primary/5`,onClick:t=>{t.stopPropagation(),u(d.getParentPath(e))},children:[(0,c.jsxs)(`div`,{className:`flex items-center gap-3 overflow-hidden`,children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[20px] text-text-muted`,children:`reply`}),(0,c.jsx)(`span`,{className:`text-sm font-medium text-text-main truncate`,children:`..`})]}),(0,c.jsx)(`div`,{className:`text-sm text-text-secondary font-mono`}),(0,c.jsx)(`div`,{className:`text-sm text-text-secondary truncate pr-2`}),(0,c.jsx)(`div`,{className:`text-sm text-text-secondary truncate pr-2`}),(0,c.jsx)(`div`,{className:`text-sm text-text-secondary`}),(0,c.jsx)(`div`,{className:`text-sm text-text-secondary`}),(0,c.jsx)(`div`,{className:`flex justify-end`})]}),p.map((t,o)=>(0,c.jsxs)(`div`,{className:`grid grid-cols-[1fr,100px,100px,100px,80px,160px,40px] items-center px-4 py-2 transition-all cursor-pointer group hover:bg-primary/5
                                                ${n?.name===t.name?`bg-primary/10`:``}
                                            `,onClick:e=>{e.stopPropagation(),r(t)},onDoubleClick:e=>{e.stopPropagation(),T(t)},children:[(0,c.jsxs)(`div`,{className:`flex items-center gap-3 overflow-hidden`,children:[(0,c.jsx)(`span`,{className:`material-symbols-outlined text-[20px] ${t.is_dir?`text-amber-500`:t.is_image?`text-purple-500`:`text-blue-500`}`,style:t.is_dir?{fontVariationSettings:`'FILL' 1`}:{},children:t.is_dir?`folder`:t.icon||`description`}),(0,c.jsx)(`span`,{className:`text-sm font-medium text-text-main truncate`,title:t.path||t.name,children:_&&t.path?t.path:t.name})]}),(0,c.jsx)(`div`,{className:`text-sm text-text-secondary font-mono`,children:t.mode}),(0,c.jsx)(`div`,{className:`text-sm text-text-secondary truncate pr-2`,title:t.owner,children:t.owner}),(0,c.jsx)(`div`,{className:`text-sm text-text-secondary truncate pr-2`,title:t.group,children:t.group}),(0,c.jsx)(`div`,{className:`text-sm text-text-secondary`,children:t.is_dir?`-`:d.formatSize(t.size)}),(0,c.jsx)(`div`,{className:`text-sm text-text-secondary`,children:d.formatDate(t.mod_time)}),(0,c.jsx)(`div`,{className:`flex justify-end`,children:(0,c.jsx)(`div`,{className:`${i===t.name?`opacity-100`:`opacity-0 group-hover:opacity-100`} transition-opacity`,children:(0,c.jsx)(D,{isOpen:i===t.name,onToggle:()=>a(i===t.name?null:t.name),onClose:()=>a(null),isDirectory:t.is_dir,onEdit:()=>f(t),onRename:()=>l({type:`rename`,target:t}),onDelete:()=>l({type:`delete`,target:t}),onNewFolder:()=>l({type:`new-folder`,target:t}),onNewFile:()=>l({type:`new-file`,target:t}),onDownload:()=>console.log(`Download`,t.name),onUpload:()=>g(d.joinPath(e,t.name),()=>window.dispatchEvent(new CustomEvent(`files-changed`))),onCopy:()=>b(t.path||d.joinPath(e,t.name)),onCut:()=>x(t.path||d.joinPath(e,t.name)),onCompress:()=>E(t),onExtract:!t.is_dir&&(t.name.endsWith(`.zip`)||t.name.endsWith(`.tar.gz`)||t.name.endsWith(`.tar`))?()=>w(t.path||d.joinPath(e,t.name)):void 0})})})]},o)),p.length===0&&(0,c.jsx)(`div`,{className:`py-10 text-center text-text-muted italic`,children:`This folder is empty`})]})]})]})})})},k=()=>{let{currentPath:e,selectedFile:t,openMenuFile:n,setOpenMenuFile:r,setActionModal:i,openFile:a,displayedFiles:o,pathParts:s}=h();return(0,c.jsx)(`aside`,{className:`w-[300px] border-l border-border-light bg-background-main flex flex-col shrink-0 overflow-y-auto z-10 hidden lg:flex`,children:t?(0,c.jsxs)(`div`,{className:`p-6 flex flex-col gap-6 h-full relative`,children:[(0,c.jsx)(`div`,{className:`absolute top-4 right-4 z-10`,children:(0,c.jsx)(D,{isOpen:n===`details-selected`,onToggle:()=>r(n===`details-selected`?null:`details-selected`),onClose:()=>r(null),isDirectory:t.is_dir,onEdit:()=>a(t),onRename:()=>i({type:`rename`,target:t}),onDelete:()=>i({type:`delete`,target:t}),onNewFolder:()=>i({type:`new-folder`,target:t}),onNewFile:()=>i({type:`new-file`,target:t}),onDownload:()=>console.log(`Download`,t.name)})}),(0,c.jsx)(`div`,{className:`w-full aspect-square bg-background-light rounded-xl border border-border-light flex flex-col items-center justify-center p-4`,children:(0,c.jsx)(`span`,{className:`material-symbols-outlined text-6xl ${t.is_dir?`text-amber-500`:`text-blue-500`}`,style:t.is_dir?{fontVariationSettings:`'FILL' 1`}:{},children:t.is_dir?`folder`:t.icon||`description`})}),(0,c.jsxs)(`div`,{children:[(0,c.jsx)(`h3`,{className:`text-lg font-bold text-text-main break-all`,children:t.name}),(0,c.jsx)(`p`,{className:`text-xs text-text-secondary mt-1`,children:t.is_dir?`Directory`:`File`})]}),(0,c.jsxs)(`div`,{className:`pt-4 border-t border-border-light space-y-3`,children:[(0,c.jsxs)(`div`,{className:`flex justify-between text-xs`,children:[(0,c.jsx)(`span`,{className:`text-text-secondary`,children:`Size`}),(0,c.jsx)(`span`,{className:`text-text-main font-medium`,children:t.is_dir?`-`:d.formatSize(t.size)})]}),(0,c.jsxs)(`div`,{className:`flex justify-between text-xs`,children:[(0,c.jsx)(`span`,{className:`text-text-secondary`,children:`Modified`}),(0,c.jsx)(`span`,{className:`text-text-main font-medium`,children:d.formatDate(t.mod_time)})]}),(0,c.jsxs)(`div`,{className:`flex justify-between text-xs`,children:[(0,c.jsx)(`span`,{className:`text-text-secondary`,children:`Owner`}),(0,c.jsx)(`span`,{className:`text-text-main font-medium truncate ml-4`,title:t.owner,children:t.owner})]}),(0,c.jsxs)(`div`,{className:`flex justify-between text-xs`,children:[(0,c.jsx)(`span`,{className:`text-text-secondary`,children:`Group`}),(0,c.jsx)(`span`,{className:`text-text-main font-medium truncate ml-4`,title:t.group,children:t.group})]}),(0,c.jsxs)(`div`,{className:`flex justify-between text-xs font-mono`,children:[(0,c.jsx)(`span`,{className:`text-text-secondary font-sans leading-none pt-0.5`,children:`Permission`}),(0,c.jsx)(`span`,{className:`text-text-main font-medium`,children:t.mode})]})]})]}):(0,c.jsxs)(`div`,{className:`p-6 flex flex-col gap-6 h-full`,children:[(0,c.jsx)(`div`,{className:`w-full aspect-square bg-background-light rounded-xl border border-border-light flex flex-col items-center justify-center p-4`,children:(0,c.jsx)(`span`,{className:`material-symbols-outlined text-6xl text-amber-500`,style:{fontVariationSettings:`'FILL' 1`},children:`folder`})}),(0,c.jsxs)(`div`,{children:[(0,c.jsx)(`h3`,{className:`text-lg font-bold text-text-main break-all`,children:s.length>0?s[s.length-1]:`Home`}),(0,c.jsx)(`p`,{className:`text-xs text-text-secondary mt-1`,children:`Directory`})]}),(0,c.jsxs)(`div`,{className:`pt-4 border-t border-border-light space-y-3`,children:[(0,c.jsxs)(`div`,{className:`flex justify-between text-xs`,children:[(0,c.jsx)(`span`,{className:`text-text-secondary`,children:`Items`}),(0,c.jsxs)(`span`,{className:`text-text-main font-medium`,children:[o.length,` items`]})]}),(0,c.jsxs)(`div`,{className:`flex justify-between text-xs`,children:[(0,c.jsx)(`span`,{className:`text-text-secondary`,children:`Location`}),(0,c.jsx)(`span`,{className:`text-text-main font-medium text-right break-all`,children:e||`/`})]})]})]})})};function A({hideDetails:e,initialPath:t}){let{actionModal:n,setActionModal:r,fileContent:i,setOpenMenuFile:s,handleActionConfirm:l}=h();return(0,o.useEffect)(()=>{let e=()=>s(null);return document.addEventListener(`click`,e),()=>document.removeEventListener(`click`,e)},[s]),(0,c.jsxs)(`div`,{className:`flex flex-1 h-full overflow-hidden`,children:[(0,c.jsx)(v,{hideHeader:e,initialPath:t}),(0,c.jsxs)(`main`,{className:`flex-1 flex flex-col min-w-0 bg-background-main relative overflow-hidden`,children:[(0,c.jsx)(a,{children:(0,c.jsx)(`div`,{className:`flex items-center gap-4`,children:(0,c.jsx)(y,{})})}),(0,c.jsxs)(`div`,{className:`flex-1 flex min-h-0`,children:[(0,c.jsx)(`div`,{className:`flex-1 flex flex-col min-w-0 bg-background-main overflow-hidden`,children:i===null?(0,c.jsx)(O,{}):(0,c.jsx)(E,{})}),!e&&(0,c.jsx)(k,{})]}),(0,c.jsx)(S,{isOpen:n?.type===`rename`,currentName:n?.target?.name||``,onClose:()=>r(null),onConfirm:e=>l({action:`rename`,name:e})}),(0,c.jsx)(C,{isOpen:n?.type===`delete`,itemName:n?.target?.name||``,onClose:()=>r(null),onConfirm:()=>l({action:`delete`,name:``})}),(0,c.jsx)(w,{isOpen:n?.type===`new-folder`,onClose:()=>r(null),onConfirm:e=>l({action:`new-folder`,name:e})}),(0,c.jsx)(T,{isOpen:n?.type===`new-file`,onClose:()=>r(null),onConfirm:e=>l({action:`new-file`,name:e})})]})]})}function j({initialPath:e,hideDetails:t}){return(0,c.jsx)(m,{initialPath:e,children:(0,c.jsx)(A,{hideDetails:t,initialPath:e})})}export{j as default};