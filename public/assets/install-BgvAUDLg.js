import{d as e,m as t}from"./react-vendor-DweroVZ6.js";var n=t(),r=e();function i({isOpen:e,onClose:t}){let[i,a]=(0,n.useState)(`sqlite`),[o,s]=(0,n.useState)(`localhost`),[c,l]=(0,n.useState)(`5432`),[u,d]=(0,n.useState)(`root`),[f,p]=(0,n.useState)(``),[m,h]=(0,n.useState)(`mta_app`),[g,_]=(0,n.useState)(`/admin`),[v,y]=(0,n.useState)(`admin`),[b,x]=(0,n.useState)(`admin@123`),[S,C]=(0,n.useState)(`idle`),[w,T]=(0,n.useState)(``);(0,n.useEffect)(()=>{let n=n=>{n.key===`Escape`&&e&&t()};return window.addEventListener(`keydown`,n),()=>window.removeEventListener(`keydown`,n)},[e,t]);let E=async()=>{C(`testing`),T(``);try{let e=await(await fetch(`/post/app/install/test`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({type:i,host:o,port:c,user:u,pass:f,name:m})})).json();e.status===`success`?(C(`success`),T(e.message)):(C(`error`),T(e.message||`Connection failed`))}catch{C(`error`),T(`Network error or server unreachable`)}},D=e=>{a(e),e===`postgres`&&l(`5432`),e===`mysql`&&l(`3306`)},[O,k]=(0,n.useState)(!1);return e?(0,r.jsxs)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6`,children:[(0,r.jsx)(`div`,{className:`fixed inset-0 bg-slate-900/60 backdrop-blur-sm animate-backdrop-enter`,onClick:t}),(0,r.jsxs)(`div`,{className:`relative w-full max-w-4xl bg-white dark:bg-slate-900 shadow-2xl ring-1 ring-slate-200 dark:ring-slate-800 p-8 animate-modal-enter overflow-hidden`,children:[(0,r.jsx)(`button`,{onClick:t,className:`absolute top-4 right-4 z-10 text-slate-400 hover:text-slate-500 dark:hover:text-slate-300 transition-colors bg-slate-100 dark:bg-slate-800 p-1`,children:(0,r.jsx)(`span`,{className:`material-symbols-outlined text-xl`,children:`close`})}),(0,r.jsxs)(`div`,{className:`mb-8`,children:[(0,r.jsxs)(`h2`,{className:`text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2`,children:[(0,r.jsx)(`span`,{className:`material-symbols-outlined text-primary`,children:`settings_suggest`}),`Installation Configuration`]}),(0,r.jsx)(`p`,{className:`text-slate-500 dark:text-slate-400 mt-2 text-sm`,children:`Configure your database and administrator access.`})]}),(0,r.jsxs)(`form`,{onSubmit:async e=>{e.preventDefault(),k(!0);try{let e=await(await fetch(`/post/app/install/action`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({type:i,host:o,port:c,name:m,user:u,pass:f,admin_path:g,admin_user:v,admin_pass:b})})).json();e.status===`success`?window.location.reload():(alert(e.message||`Installation failed`),k(!1))}catch{alert(`Network error during installation`),k(!1)}},children:[(0,r.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-8`,children:[(0,r.jsxs)(`div`,{className:`space-y-5`,children:[(0,r.jsxs)(`div`,{className:`pb-2 border-b border-slate-100 dark:border-slate-800 mb-4 flex justify-between items-center`,children:[(0,r.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,r.jsx)(`h3`,{className:`text-lg font-bold text-slate-800 dark:text-slate-200`,children:`Database`}),(0,r.jsxs)(`div`,{className:`relative`,children:[(0,r.jsxs)(`select`,{value:i,onChange:e=>D(e.target.value),className:`appearance-none cursor-pointer pl-3 pr-9 py-1.5 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 hover:border-primary/50 dark:hover:border-primary/50 rounded-lg text-sm font-semibold text-slate-700 dark:text-slate-200 transition-all focus:outline-none focus:ring-2 focus:ring-primary/20 shadow-sm`,children:[(0,r.jsx)(`option`,{value:`sqlite`,children:`SQLite`}),(0,r.jsx)(`option`,{value:`postgres`,children:`PostgreSQL`}),(0,r.jsx)(`option`,{value:`mysql`,children:`MySQL`})]}),(0,r.jsx)(`span`,{className:`absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 material-symbols-outlined text-[20px] pointer-events-none`,children:`expand_more`})]})]}),i!==`sqlite`&&(0,r.jsxs)(`div`,{className:`flex items-center gap-2`,children:[S===`success`&&(0,r.jsx)(`span`,{className:`text-emerald-500 flex items-center animate-fadeIn`,title:w,children:(0,r.jsx)(`span`,{className:`material-symbols-outlined text-[20px]`,children:`check_circle`})}),S===`error`&&(0,r.jsx)(`span`,{className:`text-red-500 flex items-center animate-fadeIn`,title:w,children:(0,r.jsx)(`span`,{className:`material-symbols-outlined text-[20px]`,children:`error`})}),(0,r.jsx)(`button`,{type:`button`,onClick:E,disabled:S===`testing`,className:`px-3 py-1.5 bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-300 font-semibold text-xs transition-colors flex items-center gap-1.5 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg`,title:`Test Connection`,children:S===`testing`?(0,r.jsx)(`span`,{className:`material-symbols-outlined text-[16px] animate-spin`,children:`refresh`}):(0,r.jsx)(`span`,{className:`material-symbols-outlined text-[16px]`,children:`wifi`})})]})]}),i===`sqlite`&&(0,r.jsxs)(`div`,{className:`p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 flex gap-3 text-sm text-blue-700 dark:text-blue-300`,children:[(0,r.jsx)(`span`,{className:`material-symbols-outlined text-[20px]`,children:`folder_open`}),(0,r.jsxs)(`div`,{children:[(0,r.jsx)(`p`,{className:`font-bold mb-1`,children:`Database Location`}),(0,r.jsx)(`p`,{className:`font-mono text-xs`,children:`~/.mta/cms/database`})]})]}),i!==`sqlite`&&(0,r.jsxs)(`div`,{className:`space-y-4 animate-fadeIn`,children:[(0,r.jsxs)(`div`,{className:`grid grid-cols-3 gap-4`,children:[(0,r.jsxs)(`div`,{className:`col-span-2`,children:[(0,r.jsx)(`label`,{className:`block text-xs uppercase font-bold text-slate-500 dark:text-slate-400 mb-1`,children:`Host`}),(0,r.jsx)(`input`,{type:`text`,value:o,onChange:e=>s(e.target.value),className:`w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 focus:outline-none focus:ring-2 focus:ring-primary/50 text-slate-900 dark:text-white transition-all`,placeholder:`localhost`})]}),(0,r.jsxs)(`div`,{children:[(0,r.jsx)(`label`,{className:`block text-xs uppercase font-bold text-slate-500 dark:text-slate-400 mb-1`,children:`Port`}),(0,r.jsx)(`input`,{type:`text`,value:c,onChange:e=>l(e.target.value),className:`w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 focus:outline-none focus:ring-2 focus:ring-primary/50 text-slate-900 dark:text-white transition-all`,placeholder:`5432`})]})]}),(0,r.jsxs)(`div`,{children:[(0,r.jsx)(`label`,{className:`block text-xs uppercase font-bold text-slate-500 dark:text-slate-400 mb-1`,children:`Database Name`}),(0,r.jsx)(`input`,{type:`text`,value:m,onChange:e=>h(e.target.value),className:`w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 focus:outline-none focus:ring-2 focus:ring-primary/50 text-slate-900 dark:text-white transition-all`,placeholder:`mta_app`})]}),(0,r.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,r.jsxs)(`div`,{children:[(0,r.jsx)(`label`,{className:`block text-xs uppercase font-bold text-slate-500 dark:text-slate-400 mb-1`,children:`User`}),(0,r.jsx)(`input`,{type:`text`,value:u,onChange:e=>d(e.target.value),className:`w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 focus:outline-none focus:ring-2 focus:ring-primary/50 text-slate-900 dark:text-white transition-all`,placeholder:`root`})]}),(0,r.jsxs)(`div`,{children:[(0,r.jsx)(`label`,{className:`block text-xs uppercase font-bold text-slate-500 dark:text-slate-400 mb-1`,children:`Password`}),(0,r.jsx)(`input`,{type:`password`,value:f,onChange:e=>p(e.target.value),className:`w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 focus:outline-none focus:ring-2 focus:ring-primary/50 text-slate-900 dark:text-white transition-all`,placeholder:`••••••`})]})]})]})]}),(0,r.jsxs)(`div`,{className:`space-y-5`,children:[(0,r.jsx)(`div`,{className:`pb-2 border-b border-slate-100 dark:border-slate-800 mb-4`,children:(0,r.jsx)(`h3`,{className:`text-lg font-bold text-slate-800 dark:text-slate-200`,children:`Administrator`})}),(0,r.jsxs)(`div`,{children:[(0,r.jsx)(`label`,{className:`block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2`,children:`Admin Path`}),(0,r.jsxs)(`div`,{className:`relative`,children:[(0,r.jsx)(`span`,{className:`absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 material-symbols-outlined text-[20px]`,children:`link`}),(0,r.jsx)(`input`,{type:`text`,value:g,onChange:e=>_(e.target.value),className:`w-full pl-10 pr-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 focus:outline-none focus:ring-2 focus:ring-primary/50 text-slate-900 dark:text-white transition-all placeholder:text-slate-400`,placeholder:`/admin`})]})]}),(0,r.jsxs)(`div`,{children:[(0,r.jsx)(`label`,{className:`block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2`,children:`Username`}),(0,r.jsxs)(`div`,{className:`relative`,children:[(0,r.jsx)(`span`,{className:`absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 material-symbols-outlined text-[20px]`,children:`person`}),(0,r.jsx)(`input`,{type:`text`,value:v,onChange:e=>y(e.target.value),className:`w-full pl-10 pr-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 focus:outline-none focus:ring-2 focus:ring-primary/50 text-slate-900 dark:text-white transition-all placeholder:text-slate-400`,placeholder:`admin`})]})]}),(0,r.jsxs)(`div`,{children:[(0,r.jsx)(`label`,{className:`block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2`,children:`Password`}),(0,r.jsxs)(`div`,{className:`relative`,children:[(0,r.jsx)(`span`,{className:`absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 material-symbols-outlined text-[20px]`,children:`lock`}),(0,r.jsx)(`input`,{type:`text`,value:b,onChange:e=>x(e.target.value),className:`w-full pl-10 pr-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 focus:outline-none focus:ring-2 focus:ring-primary/50 text-slate-900 dark:text-white transition-all placeholder:text-slate-400`,placeholder:`password`})]})]})]})]}),(0,r.jsxs)(`div`,{className:`mt-10 pt-6 border-t border-slate-100 dark:border-slate-800 flex justify-end gap-3`,children:[(0,r.jsx)(`button`,{type:`button`,onClick:t,className:`px-6 py-3.5 font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors`,children:`Cancel`}),(0,r.jsx)(`button`,{type:`submit`,disabled:O,className:`bg-primary hover:bg-primary/90 text-white font-bold py-3.5 px-8 transition-all shadow-lg shadow-primary/25 flex items-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed`,children:O?(0,r.jsxs)(r.Fragment,{children:[`Installing...`,(0,r.jsx)(`span`,{className:`material-symbols-outlined text-[20px] animate-spin`,children:`refresh`})]}):(0,r.jsxs)(r.Fragment,{children:[`Complete Installation`,(0,r.jsx)(`span`,{className:`material-symbols-outlined text-[20px]`,children:`check`})]})})]})]})]})]}):null}function a(){let[e,t]=(0,n.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(`style`,{children:`
                .material-symbols-outlined {
                    font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 24;
                }
                @keyframes modalEnter {
                    from { opacity: 0; transform: scale(0.95) translateY(10px); }
                    to { opacity: 1; transform: scale(1) translateY(0); }
                }
                .animate-modal-enter {
                    animation: modalEnter 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
                }
                @keyframes backdropEnter {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                .animate-backdrop-enter {
                    animation: backdropEnter 0.3s ease-out forwards;
                }
            `}),(0,r.jsx)(`main`,{className:`w-full max-w-lg bg-white dark:bg-slate-900 shadow-2xl shadow-slate-200/50 dark:shadow-none border border-white dark:border-slate-800 overflow-hidden`,children:(0,r.jsxs)(`div`,{className:`p-10 md:p-14 flex flex-col items-center text-center`,children:[(0,r.jsx)(`div`,{className:`mb-8 p-4 bg-primary/10`,children:(0,r.jsx)(`span`,{className:`material-symbols-outlined text-primary text-5xl`,children:`auto_awesome`})}),(0,r.jsx)(`h1`,{className:`text-slate-900 dark:text-white text-3xl md:text-4xl font-extrabold tracking-tight mb-4`,children:`Welcome to MTA CMS`}),(0,r.jsx)(`p`,{className:`text-slate-500 dark:text-slate-400 text-lg leading-relaxed mb-10 max-w-sm`,children:`Everything is ready to go. Let's get your setup started and have your site running in minutes.`}),(0,r.jsx)(`div`,{className:`w-full`,children:(0,r.jsxs)(`button`,{onClick:()=>t(!0),className:`w-full bg-primary hover:bg-primary/90 text-white font-bold py-5 px-8 text-lg transition-all transform hover:scale-[1.02] active:scale-[0.98] shadow-lg shadow-primary/25 flex items-center justify-center gap-3`,children:[`Install Now`,(0,r.jsx)(`span`,{className:`material-symbols-outlined`,children:`rocket_launch`})]})})]})}),(0,r.jsx)(`div`,{className:`fixed bottom-8 text-slate-400 dark:text-slate-600 text-sm font-medium`,children:`Version 1.0.0`}),(0,r.jsx)(i,{isOpen:e,onClose:()=>t(!1)})]})}export{a as default};