import{$ as e,D as t,G as n,H as r,J as i,K as a,P as o,V as s,Y as c,_ as l,dt as u,k as d,pt as f,s as p,tt as m}from"./react-vendor-JXP-I5sL.js";var h=f(),g=u();function _(){let[u,f]=(0,h.useState)([]),[_,v]=(0,h.useState)(!1),[y,b]=(0,h.useState)(!0);(0,h.useEffect)(()=>{x()},[]);let x=async()=>{b(!0);try{let e=await fetch(`/root/post/backup/browse`);if(e.ok){let t=await e.json();t.success&&f(t.items||[])}}catch(e){console.error(`Failed to load backups:`,e)}finally{b(!1)}},S=async()=>{v(!0);try{let e=await(await fetch(`/root/post/backup/create`,{method:`POST`,headers:{"Content-Type":`application/json`}})).json();e.success?(alert(`Backup created successfully!`),x()):alert(`Failed to create backup: `+(e.message||`Unknown error`))}catch(e){console.error(`Failed to create backup:`,e),alert(`Failed to create backup`)}finally{v(!1)}},C=e=>{window.location.href=`/root/post/backup/download?name=${encodeURIComponent(e.name)}`},w=async e=>{if(confirm(`Are you sure you want to delete ${e.name}?`))try{let t=await(await fetch(`/root/post/backup/delete`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({name:e.name})})).json();t.success?(alert(`Backup deleted successfully!`),x()):alert(`Failed to delete backup: `+(t.message||`Unknown error`))}catch(e){console.error(`Failed to delete backup:`,e),alert(`Failed to delete backup`)}},T=[{icon:r,label:`Total Backups`,value:u.length.toString(),color:`from-blue-500 to-cyan-500`},{icon:d,label:`Total Size`,value:E(),color:`from-purple-500 to-pink-500`},{icon:a,label:`Last Backup`,value:D(),color:`from-green-500 to-emerald-500`},{icon:e,label:`Next Scheduled`,value:`Tomorrow 2:00 AM`,color:`from-orange-500 to-red-500`}];function E(){return u.length===0?`0 B`:u.length+` backups`}function D(){return u.length===0?`Never`:u[0]?`Today`:`Never`}return(0,g.jsxs)(`div`,{className:`h-full flex flex-col`,children:[(0,g.jsx)(`div`,{className:`px-6 py-4`,children:(0,g.jsx)(`div`,{className:`flex items-center justify-end`,children:(0,g.jsx)(`button`,{onClick:S,disabled:_,className:`group px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 disabled:from-slate-400 disabled:to-slate-500 text-white rounded-xl font-semibold shadow-lg shadow-indigo-500/30 transition-all duration-300 hover:scale-105 disabled:scale-100 disabled:cursor-not-allowed flex items-center gap-2`,children:_?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(l,{className:`w-5 h-5 animate-spin`}),`Creating...`]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(m,{className:`w-5 h-5`}),`Create Backup`]})})})}),(0,g.jsx)(`div`,{className:`px-6 py-6`,children:(0,g.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4`,children:T.map((e,t)=>(0,g.jsxs)(`div`,{className:`group relative bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-2xl p-6 hover:shadow-xl hover:shadow-slate-200/50 dark:hover:shadow-slate-900/50 transition-all duration-300 hover:-translate-y-1 overflow-hidden`,children:[(0,g.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-br ${e.color} opacity-0 group-hover:opacity-5 transition-opacity`}),(0,g.jsxs)(`div`,{className:`relative flex items-start justify-between`,children:[(0,g.jsxs)(`div`,{children:[(0,g.jsx)(`div`,{className:`text-sm font-medium text-slate-500 dark:text-slate-400 mb-2`,children:e.label}),(0,g.jsx)(`div`,{className:`text-3xl font-bold text-slate-900 dark:text-white`,children:e.value})]}),(0,g.jsx)(`div`,{className:`p-3 bg-gradient-to-br ${e.color} rounded-xl`,children:(0,g.jsx)(e.icon,{className:`w-6 h-6 text-white`})})]})]},t))})}),(0,g.jsx)(`div`,{className:`px-6 pb-6`,children:(0,g.jsxs)(`div`,{className:`grid md:grid-cols-2 gap-4`,children:[(0,g.jsxs)(`div`,{className:`bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 flex items-start gap-3`,children:[(0,g.jsx)(t,{className:`w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5`}),(0,g.jsxs)(`div`,{className:`flex-1`,children:[(0,g.jsx)(`h3`,{className:`text-sm font-semibold text-blue-900 dark:text-blue-100 mb-1`,children:`Automated Backups`}),(0,g.jsx)(`p`,{className:`text-sm text-blue-700 dark:text-blue-300`,children:`Backups are automatically created daily at 2:00 AM. You can also create manual backups anytime. All backups include the entire root folder.`})]})]}),(0,g.jsxs)(`div`,{className:`bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-4 flex items-start gap-3`,children:[(0,g.jsx)(n,{className:`w-5 h-5 text-purple-600 dark:text-purple-400 flex-shrink-0 mt-0.5`}),(0,g.jsxs)(`div`,{className:`flex-1`,children:[(0,g.jsx)(`h3`,{className:`text-sm font-semibold text-purple-900 dark:text-purple-100 mb-1`,children:`Cloud Backup`}),(0,g.jsx)(`p`,{className:`text-sm text-purple-700 dark:text-purple-300 mb-2`,children:`Upload backups to cloud storage for extra security. Configure in Cloud Settings.`}),(0,g.jsxs)(`div`,{className:`flex flex-wrap gap-2`,children:[(0,g.jsx)(`span`,{className:`px-2 py-0.5 bg-white dark:bg-purple-800/30 rounded text-xs font-medium text-purple-700 dark:text-purple-300`,children:`Google Drive`}),(0,g.jsx)(`span`,{className:`px-2 py-0.5 bg-white dark:bg-purple-800/30 rounded text-xs font-medium text-purple-700 dark:text-purple-300`,children:`Dropbox`}),(0,g.jsx)(`span`,{className:`px-2 py-0.5 bg-white dark:bg-purple-800/30 rounded text-xs font-medium text-purple-700 dark:text-purple-300`,children:`AWS S3`})]})]})]})]})}),(0,g.jsx)(`div`,{className:`flex-1 px-6 pb-6 overflow-hidden`,children:(0,g.jsxs)(`div`,{className:`bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-2xl h-full flex flex-col overflow-hidden`,children:[(0,g.jsx)(`div`,{className:`px-6 py-4 border-b border-slate-200 dark:border-slate-700`,children:(0,g.jsxs)(`h2`,{className:`text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2`,children:[(0,g.jsx)(o,{className:`w-5 h-5 text-indigo-600 dark:text-indigo-400`}),`Available Backups`]})}),(0,g.jsx)(`div`,{className:`flex-1 overflow-y-auto`,children:y?(0,g.jsx)(`div`,{className:`flex items-center justify-center py-20`,children:(0,g.jsx)(l,{className:`w-8 h-8 animate-spin text-indigo-600 dark:text-indigo-400`})}):u.length===0?(0,g.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-20`,children:[(0,g.jsx)(`div`,{className:`w-20 h-20 bg-slate-100 dark:bg-slate-800 rounded-2xl flex items-center justify-center mb-4`,children:(0,g.jsx)(r,{className:`w-10 h-10 text-slate-400`})}),(0,g.jsx)(`h3`,{className:`text-lg font-semibold text-slate-900 dark:text-white mb-2`,children:`No Backups Yet`}),(0,g.jsx)(`p`,{className:`text-sm text-slate-500 dark:text-slate-400 mb-6`,children:`Create your first backup to get started`}),(0,g.jsxs)(`button`,{onClick:S,disabled:_,className:`px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 disabled:from-slate-400 disabled:to-slate-500 text-white rounded-xl font-semibold shadow-lg transition-all duration-300 hover:scale-105 disabled:scale-100 flex items-center gap-2`,children:[(0,g.jsx)(m,{className:`w-5 h-5`}),`Create First Backup`]})]}):(0,g.jsxs)(`table`,{className:`w-full`,children:[(0,g.jsx)(`thead`,{className:`bg-slate-50 dark:bg-slate-900/50 sticky top-0 z-10`,children:(0,g.jsxs)(`tr`,{children:[(0,g.jsx)(`th`,{className:`px-6 py-3 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider`,children:`Status`}),(0,g.jsx)(`th`,{className:`px-6 py-3 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider`,children:`Backup Name`}),(0,g.jsx)(`th`,{className:`px-6 py-3 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider`,children:`Type`}),(0,g.jsx)(`th`,{className:`px-6 py-3 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider`,children:`Size`}),(0,g.jsx)(`th`,{className:`px-6 py-3 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider`,children:`Date & Time`}),(0,g.jsx)(`th`,{className:`px-6 py-3 text-right text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider`,children:`Actions`})]})}),(0,g.jsx)(`tbody`,{className:`divide-y divide-slate-200 dark:divide-slate-700`,children:u.map(e=>(0,g.jsxs)(`tr`,{className:`group hover:bg-slate-50 dark:hover:bg-slate-900/50 transition-colors`,children:[(0,g.jsx)(`td`,{className:`px-6 py-4`,children:e.status===`completed`?(0,g.jsxs)(`div`,{className:`flex items-center gap-2 text-green-600 dark:text-green-400`,children:[(0,g.jsx)(i,{className:`w-5 h-5`}),(0,g.jsx)(`span`,{className:`text-sm font-medium`,children:`Completed`})]}):e.status===`failed`?(0,g.jsxs)(`div`,{className:`flex items-center gap-2 text-red-600 dark:text-red-400`,children:[(0,g.jsx)(c,{className:`w-5 h-5`}),(0,g.jsx)(`span`,{className:`text-sm font-medium`,children:`Failed`})]}):(0,g.jsxs)(`div`,{className:`flex items-center gap-2 text-blue-600 dark:text-blue-400`,children:[(0,g.jsx)(l,{className:`w-5 h-5 animate-spin`}),(0,g.jsx)(`span`,{className:`text-sm font-medium`,children:`In Progress`})]})}),(0,g.jsx)(`td`,{className:`px-6 py-4`,children:(0,g.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,g.jsx)(`div`,{className:`p-2 bg-indigo-100 dark:bg-indigo-500/10 rounded-lg`,children:(0,g.jsx)(m,{className:`w-4 h-4 text-indigo-600 dark:text-indigo-400`})}),(0,g.jsx)(`span`,{className:`text-sm font-medium text-slate-900 dark:text-white font-mono`,children:e.name})]})}),(0,g.jsx)(`td`,{className:`px-6 py-4`,children:(0,g.jsx)(`span`,{className:`inline-flex px-3 py-1 rounded-full text-xs font-semibold ${e.type===`full`?`bg-purple-100 text-purple-700 dark:bg-purple-500/10 dark:text-purple-400`:`bg-blue-100 text-blue-700 dark:bg-blue-500/10 dark:text-blue-400`}`,children:e.type===`full`?`Full Backup`:`Incremental`})}),(0,g.jsx)(`td`,{className:`px-6 py-4`,children:(0,g.jsx)(`span`,{className:`text-sm text-slate-600 dark:text-slate-400 font-medium`,children:e.size})}),(0,g.jsx)(`td`,{className:`px-6 py-4`,children:(0,g.jsxs)(`div`,{className:`flex flex-col`,children:[(0,g.jsx)(`span`,{className:`text-sm font-medium text-slate-900 dark:text-white`,children:e.date}),(0,g.jsx)(`span`,{className:`text-xs text-slate-500 dark:text-slate-400`,children:e.time})]})}),(0,g.jsx)(`td`,{className:`px-6 py-4`,children:(0,g.jsxs)(`div`,{className:`flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity`,children:[(0,g.jsx)(`button`,{onClick:()=>C(e),className:`p-2 hover:bg-blue-50 dark:hover:bg-blue-500/10 text-blue-600 dark:text-blue-400 rounded-lg transition-colors`,title:`Download to Local`,children:(0,g.jsx)(s,{className:`w-4 h-4`})}),(0,g.jsx)(`button`,{className:`p-2 hover:bg-purple-50 dark:hover:bg-purple-500/10 text-purple-600 dark:text-purple-400 rounded-lg transition-colors`,title:`Backup to Cloud`,children:(0,g.jsx)(n,{className:`w-4 h-4`})}),(0,g.jsx)(`button`,{onClick:()=>w(e),className:`p-2 hover:bg-red-50 dark:hover:bg-red-500/10 text-red-600 dark:text-red-400 rounded-lg transition-colors`,title:`Delete`,children:(0,g.jsx)(p,{className:`w-4 h-4`})})]})})]},e.id))})]})})]})})]})}export{_ as default};