const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pages-CXf7jXPt.js","assets/react-vendor-BnB1E_f7.js","assets/monaco-vendor-Buopimvp.js","assets/rolldown-runtime-Cn8xt2Gj.js","assets/ecommerce-DQIB5Qma.js","assets/overview-ADCzxd4N.js","assets/sites-BsCn1lVQ.js","assets/cms-MFPJXToF.js","assets/dashboard-Z4ndDeJz.js","assets/welcome-DLKBGqO9.js","assets/builder-DGD-0OW8.js","assets/backup-BZ1Wu4wW.js","assets/files-D9Z7lqPz.js","assets/login-vFVzg9_J.js"])))=>i.map(i=>d[i]);
import{$ as e,at as t,ct as n,et as r,it as i,lt as a,nt as o,rt as s,st as c,tt as l,ut as u}from"./react-vendor-BnB1E_f7.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var d=a(),f=u(),p=n(),m=(0,f.createContext)({theme:`system`,setTheme:()=>null});function h({children:e,defaultTheme:t=`system`,storageKey:n=`vite-ui-theme`}){let[r,i]=(0,f.useState)(()=>localStorage.getItem(n)||t);(0,f.useEffect)(()=>{let e=window.document.documentElement;if(e.classList.remove(`light`,`dark`,`system`),r===`system`){let t=window.matchMedia(`(prefers-color-scheme: system)`).matches?`system`:window.matchMedia(`(prefers-color-scheme: dark)`).matches?`dark`:`light`;e.classList.add(t);return}e.classList.add(r)},[r]);let a={theme:r,setTheme:e=>{localStorage.setItem(n,e),i(e)}};return(0,p.jsx)(m.Provider,{value:a,children:e})}const g=()=>{let e=(0,f.useContext)(m);if(e===void 0)throw Error(`useTheme must be used within a ThemeProvider`);return e};var _=(0,f.createContext)(void 0);function v({children:e}){let[t,n]=(0,f.useState)(!1),[r,i]=(0,f.useState)(!0),[a,o]=(0,f.useState)(!1),s=async()=>{try{let e=await fetch(`/root/post/user`,{method:`GET`,headers:{Accept:`application/json`}});if(e.ok){let t=await e.json();return n(t.isLoggedIn===!0),o(t.isLoggedIn===!0),t.isLoggedIn===!0}return n(!1),o(!1),!1}catch(e){return console.error(`Auth check failed:`,e),n(!1),o(!1),!1}finally{i(!1)}};return(0,f.useEffect)(()=>{s();let e=setInterval(()=>{t&&s()},5e3);return()=>clearInterval(e)},[t]),(0,p.jsx)(_.Provider,{value:{isAuthenticated:t,isLoading:r,isRoot:a,login:async(e,t)=>{try{let r=new FormData;r.append(`username`,e),r.append(`password`,t);let i=await fetch(`/root/post/user/login`,{method:`POST`,body:r}),a=await i.json();if(i.ok&&a.success)n(!0),await s();else throw Error(a.message||`Login failed`)}catch(e){throw console.error(`Login error:`,e),e}},logout:()=>{document.cookie.split(`;`).forEach(e=>{let t=e.split(`=`)[0].trim();t.startsWith(`mta_session_`)&&(document.cookie=`${t}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`)}),n(!1),o(!1)},checkAuth:s},children:e})}function y(){let e=(0,f.useContext)(_);if(e===void 0)throw Error(`useAuth must be used within an AuthProvider`);return e}var b=(0,f.createContext)(void 0);function x({children:e}){let[t,n]=(0,f.useState)(null),[r,i]=(0,f.useState)(!0),a=async()=>{try{let e=await(await fetch(`/root/post/system/stats`)).json();e.success===!1?n(null):n(e),i(!1)}catch(e){console.error(`Failed to fetch stats`,e),i(!1)}};return(0,f.useEffect)(()=>{a();let e=setInterval(a,2e3);return()=>clearInterval(e)},[]),(0,p.jsx)(b.Provider,{value:{stats:t,loading:r},children:e})}function S(){let e=(0,f.useContext)(b);if(e===void 0)throw Error(`useStats must be used within a StatsProvider`);return e}function C(){let[e,n]=(0,f.useState)(!1),i=(0,f.useRef)(null),a=t(),{theme:o,setTheme:s}=g(),{stats:c}=S(),l=a.pathname.startsWith(`/dashboard`),u=a.pathname.startsWith(`/backup`),d=a.pathname.startsWith(`/files`),m=a.pathname.startsWith(`/builder`);(0,f.useEffect)(()=>{function e(e){i.current&&!i.current.contains(e.target)&&n(!1)}return document.addEventListener(`mousedown`,e),()=>document.removeEventListener(`mousedown`,e)},[]);let h=[{id:`light`,label:`Light`,icon:`light_mode`},{id:`dark`,label:`Dark`,icon:`dark_mode`},{id:`system`,label:`System`,icon:`desktop_windows`}],_=`text-indigo-600 bg-indigo-50 dark:bg-indigo-500/10 dark:text-indigo-400`,v=`text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-800`,y=`px-4 py-2 text-sm font-medium rounded-lg transition-colors`;return(0,p.jsx)(`header`,{className:`sticky top-0 z-50 w-full bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 shadow-sm`,children:(0,p.jsxs)(`div`,{className:`h-[56px] flex items-center justify-between pr-6 lg:pr-8`,children:[(0,p.jsxs)(`div`,{className:`flex items-center h-full`,children:[(0,p.jsx)(`div`,{className:`w-[56px] h-full flex items-center justify-center border-r border-slate-200 dark:border-slate-800`,children:(0,p.jsx)(r,{to:`/`,className:`size-8 text-indigo-600 dark:text-indigo-500 flex items-center justify-center`,children:(0,p.jsx)(`svg`,{className:`w-full h-full`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,p.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z`})})})}),(0,p.jsxs)(`nav`,{className:`hidden md:flex items-center gap-1 ml-6`,children:[(0,p.jsxs)(r,{className:`${y} ${l?_:v} flex items-center gap-2`,to:`/dashboard`,children:[(0,p.jsx)(`span`,{className:`material-symbols-outlined text-[20px]`,children:`dashboard`}),`Dashboard`]}),(0,p.jsxs)(r,{className:`${y} ${d?_:v} flex items-center gap-2`,to:`/files`,children:[(0,p.jsx)(`span`,{className:`material-symbols-outlined text-[20px]`,children:`folder`}),`Files`]}),(0,p.jsxs)(r,{className:`${y} ${u?_:v} flex items-center gap-2`,to:`/backup`,children:[(0,p.jsx)(`span`,{className:`material-symbols-outlined text-[20px]`,children:`backup`}),`Backup`]}),(0,p.jsxs)(r,{className:`${y} ${m?_:v} flex items-center gap-2`,to:`/builder`,children:[(0,p.jsx)(`span`,{className:`material-symbols-outlined text-[20px]`,children:`handyman`}),`Builder`]})]})]}),(0,p.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,p.jsxs)(`div`,{className:`hidden xl:flex items-center gap-3 mr-2`,children:[(0,p.jsx)(w,{icon:`ðŸ’»`,label:`CPU`,value:c?.cpu?.percent}),(0,p.jsx)(w,{icon:`ðŸŒ`,label:`Net`,value:(c?.network?.rx_kbs||0)+(c?.network?.tx_kbs||0),suffix:`KB/s`}),(0,p.jsx)(w,{icon:`âš¡`,label:`RAM`,value:c?.memory?.percent}),(0,p.jsx)(w,{icon:`ðŸ’¾`,label:`Disk`,value:c?.storage?.percent})]}),(0,p.jsxs)(`button`,{className:`size-10 flex items-center justify-center bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300 transition-colors relative`,children:[(0,p.jsx)(`span`,{className:`material-symbols-outlined text-[20px]`,children:`notifications`}),(0,p.jsx)(`span`,{className:`absolute top-2.5 right-2.5 size-2 bg-red-500 rounded-full border-2 border-white dark:border-slate-900`})]}),(0,p.jsx)(`button`,{className:`size-10 flex items-center justify-center bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300 transition-colors`,title:`Help & Documentation`,children:(0,p.jsx)(`span`,{className:`material-symbols-outlined text-[20px]`,children:`help_outline`})}),(0,p.jsxs)(`div`,{className:`relative`,ref:i,children:[(0,p.jsx)(`button`,{onClick:()=>n(!e),className:`size-10 flex items-center justify-center bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300 transition-colors`,title:`Change theme`,children:(0,p.jsx)(`span`,{className:`material-symbols-outlined text-[20px]`,children:h.find(e=>e.id===o)?.icon||`light_mode`})}),e&&(0,p.jsx)(`div`,{className:`absolute right-0 mt-2 w-36 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-xl py-1 z-[60]`,children:h.map(e=>(0,p.jsxs)(`button`,{onClick:()=>{s(e.id),n(!1)},className:`w-full flex items-center gap-3 px-3 py-2 text-sm transition-colors ${o===e.id?`text-primary bg-primary/5`:`text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700`}`,children:[(0,p.jsx)(`span`,{className:`material-symbols-outlined text-[18px]`,children:e.icon}),e.label]},e.id))})]}),(0,p.jsx)(`button`,{className:`size-10 flex items-center justify-center bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300 transition-colors`,onClick:()=>{fetch(`/root/post/user/logout`).then(()=>{window.location.href=`/root/login`})},title:`Sign out`,children:(0,p.jsx)(`span`,{className:`material-symbols-outlined text-[20px]`,children:`logout`})})]})]})})}function w({icon:e,label:t,value:n,suffix:r=`%`}){return n===void 0?null:(0,p.jsxs)(`div`,{className:`flex items-center gap-1.5 px-2 py-1 bg-slate-100 dark:bg-slate-800 rounded-lg`,children:[(0,p.jsx)(`span`,{className:`text-sm`,children:e}),(0,p.jsx)(`span`,{className:`text-[10px] font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider`,children:t}),(0,p.jsxs)(`span`,{className:`text-xs font-bold text-slate-900 dark:text-white`,children:[r===`KB/s`?n.toFixed(1):n.toFixed(0),r]})]})}function T({bodyClasses:e=[]}){return(0,f.useEffect)(()=>{let t=[...[`dark:bg-background-dark`,`bg-background-light`,`overflow-x-hidden`,`dark:text-white`,`text-slate-900`,`font-display`,`h-screen`,`overflow-hidden`,`flex-col`,`flex`],...e],n=document.getElementById(`root`);if(n)return n.classList.add(...t),()=>{n.classList.remove(...t)}},[e]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(C,{}),(0,p.jsx)(`main`,{className:`flex-1 w-full max-w-[1920px] mx-auto flex flex-col`,children:(0,p.jsx)(o,{})})]})}function E(){return(0,p.jsxs)(`div`,{className:`fixed inset-0 flex items-center justify-center bg-white dark:bg-slate-900 z-[9999]`,children:[(0,p.jsxs)(`div`,{className:`flex flex-col items-center gap-6`,children:[(0,p.jsxs)(`div`,{className:`relative size-20`,children:[(0,p.jsx)(`div`,{className:`absolute inset-0 border-4 border-primary/10 rounded-full`}),(0,p.jsx)(`div`,{className:`absolute inset-0 border-4 border-primary border-t-transparent rounded-full animate-spin`}),(0,p.jsx)(`div`,{className:`absolute inset-4 border-4 border-indigo-400/20 rounded-full animate-pulse`})]}),(0,p.jsxs)(`div`,{className:`flex flex-col items-center gap-2`,children:[(0,p.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,p.jsx)(`div`,{className:`size-2 bg-primary rounded-full animate-bounce [animation-delay:-0.3s]`}),(0,p.jsx)(`div`,{className:`size-2 bg-primary rounded-full animate-bounce [animation-delay:-0.15s]`}),(0,p.jsx)(`div`,{className:`size-2 bg-primary rounded-full animate-bounce`})]}),(0,p.jsx)(`h2`,{className:`text-xl font-bold text-slate-900 dark:text-white tracking-tight mt-2`,children:`MTA-APP Dashboard`}),(0,p.jsx)(`p`,{className:`text-sm text-slate-500 dark:text-slate-400 font-medium`,children:`Preparing your experience...`})]})]}),(0,p.jsx)(`div`,{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 size-[400px] bg-primary/5 blur-[120px] rounded-full -z-10 pointer-events-none`})]})}var D=(0,f.lazy)(()=>c(()=>import(`./pages-CXf7jXPt.js`),__vite__mapDeps([0,1,2,3]))),O=(0,f.lazy)(()=>c(()=>import(`./ecommerce-DQIB5Qma.js`),__vite__mapDeps([4,1,2,3]))),k=(0,f.lazy)(()=>c(()=>import(`./overview-ADCzxd4N.js`),__vite__mapDeps([5,1,2,3]))),A=(0,f.lazy)(()=>c(()=>import(`./sites-BsCn1lVQ.js`),__vite__mapDeps([6,1,2,3]))),j=(0,f.lazy)(()=>c(()=>import(`./cms-MFPJXToF.js`),__vite__mapDeps([7,1,2,3]))),M=(0,f.lazy)(()=>c(()=>import(`./dashboard-Z4ndDeJz.js`),__vite__mapDeps([8,1,2,3]))),N=(0,f.lazy)(()=>c(()=>import(`./welcome-DLKBGqO9.js`),__vite__mapDeps([9,1,2,3]))),P=(0,f.lazy)(()=>c(()=>import(`./builder-DGD-0OW8.js`),__vite__mapDeps([10,1,2,3]))),F=(0,f.lazy)(()=>c(()=>import(`./backup-BZ1Wu4wW.js`),__vite__mapDeps([11,1,2,3]))),I=(0,f.lazy)(()=>c(()=>import(`./files-D9Z7lqPz.js`),__vite__mapDeps([12,1,2,3]))),L=(0,f.lazy)(()=>c(()=>import(`./login-vFVzg9_J.js`),__vite__mapDeps([13,1,2,3])));function R(){let{isAuthenticated:e,isLoading:t}=y();return t?(0,p.jsx)(E,{}):e?(0,p.jsx)(o,{}):(0,p.jsx)(l,{to:`/login`,replace:!0})}function z(){return(0,p.jsx)(e,{basename:`/root`,children:(0,p.jsx)(f.Suspense,{fallback:(0,p.jsx)(E,{}),children:(0,p.jsxs)(i,{children:[(0,p.jsx)(s,{path:`/login`,element:(0,p.jsx)(L,{})}),(0,p.jsx)(s,{element:(0,p.jsx)(R,{}),children:(0,p.jsxs)(s,{element:(0,p.jsx)(T,{}),children:[(0,p.jsx)(s,{index:!0,element:(0,p.jsx)(N,{})}),(0,p.jsxs)(s,{path:`dashboard`,element:(0,p.jsx)(M,{}),children:[(0,p.jsx)(s,{index:!0,element:(0,p.jsx)(k,{})}),(0,p.jsx)(s,{path:`sites/*`,element:(0,p.jsx)(A,{})}),(0,p.jsx)(s,{path:`pages`,element:(0,p.jsx)(D,{})}),(0,p.jsx)(s,{path:`cms/*`,element:(0,p.jsx)(j,{})}),(0,p.jsx)(s,{path:`ecommerce/*`,element:(0,p.jsx)(O,{})})]}),(0,p.jsxs)(s,{path:`builder`,element:(0,p.jsx)(P,{}),children:[(0,p.jsx)(s,{index:!0,element:(0,p.jsx)(`div`,{className:`text-2xl font-bold`,children:`Builder Home`})}),(0,p.jsx)(s,{path:`templates`,element:(0,p.jsx)(`div`,{className:`text-2xl font-bold`,children:`Templates Editor`})}),(0,p.jsx)(s,{path:`components`,element:(0,p.jsx)(`div`,{className:`text-2xl font-bold`,children:`Components Library`})}),(0,p.jsx)(s,{path:`assets`,element:(0,p.jsx)(`div`,{className:`text-2xl font-bold`,children:`Asset Manager`})}),(0,p.jsx)(s,{path:`settings`,element:(0,p.jsx)(`div`,{className:`text-2xl font-bold`,children:`Builder Settings`})})]}),(0,p.jsx)(s,{path:`backup/*`,element:(0,p.jsx)(F,{})}),(0,p.jsx)(s,{path:`files`,element:(0,p.jsx)(I,{})}),(0,p.jsx)(s,{path:`*`,element:(0,p.jsx)(l,{to:`dashboard`,replace:!0})})]})})]})})})}function B(){return(0,p.jsx)(f.StrictMode,{children:(0,p.jsx)(f.Suspense,{fallback:(0,p.jsx)(E,{}),children:(0,p.jsx)(h,{defaultTheme:`system`,storageKey:`vite-ui-theme`,children:(0,p.jsx)(v,{children:(0,p.jsx)(x,{children:(0,p.jsx)(z,{})})})})})})}(0,d.createRoot)(document.getElementById(`root`)).render((0,p.jsx)(B,{}));export{y as t};