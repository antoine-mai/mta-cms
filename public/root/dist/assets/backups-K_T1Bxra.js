import{B as e,D as t,K as n,M as r,Q as i,T as a,U as o,V as s,W as c,X as l,ct as u,d,h as f,m as p,o as m,r as h,ut as g}from"./react-vendor-BnB1E_f7.js";var _=g(),v=u();function y({stats:e}){return(0,v.jsx)(`div`,{className:`px-6 py-6`,children:(0,v.jsx)(`div`,{className:`grid grid-cols-2 lg:grid-cols-4 gap-4`,children:e.map((e,t)=>(0,v.jsxs)(`div`,{className:`group relative bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-2xl p-4 lg:p-6 hover:shadow-xl transition-all duration-300 overflow-hidden`,children:[(0,v.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-br ${e.color} opacity-0 group-hover:opacity-5 transition-opacity`}),(0,v.jsxs)(`div`,{className:`relative flex items-center justify-between`,children:[(0,v.jsxs)(`div`,{children:[(0,v.jsx)(`div`,{className:`text-[10px] lg:text-xs font-bold text-slate-400 uppercase tracking-wider mb-1`,children:e.label}),(0,v.jsx)(`div`,{className:`text-xl lg:text-2xl font-bold text-slate-900 dark:text-white`,children:e.value})]}),(0,v.jsx)(`div`,{className:`p-2 lg:p-3 bg-gradient-to-br ${e.color} rounded-xl shadow-lg`,children:(0,v.jsx)(e.icon,{className:`w-4 h-4 lg:w-5 lg:h-5 text-white`})})]})]},t))})})}function b({loading:t,backups:i,onDownload:a,onDelete:o}){return(0,v.jsx)(`div`,{className:`px-6 pb-6 overflow-hidden`,children:(0,v.jsxs)(`div`,{className:`bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-2xl flex flex-col overflow-hidden`,children:[(0,v.jsx)(`div`,{className:`px-6 py-4 border-b border-slate-200 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/50`,children:(0,v.jsxs)(`h2`,{className:`text-sm font-bold text-slate-900 dark:text-white flex items-center gap-2`,children:[(0,v.jsx)(r,{className:`w-4 h-4 text-indigo-600 dark:text-indigo-400`}),`Available Backups`]})}),(0,v.jsx)(`div`,{className:`overflow-x-auto`,children:t?(0,v.jsx)(`div`,{className:`flex items-center justify-center py-20`,children:(0,v.jsx)(f,{className:`w-8 h-8 animate-spin text-indigo-600 dark:text-indigo-400`})}):i.length===0?(0,v.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-20`,children:[(0,v.jsx)(s,{className:`w-12 h-12 text-slate-200 dark:text-slate-700 mb-4`}),(0,v.jsx)(`p`,{className:`text-sm text-slate-500`,children:`No backups found.`})]}):(0,v.jsxs)(`table`,{className:`w-full text-left border-collapse`,children:[(0,v.jsx)(`thead`,{className:`bg-slate-50 dark:bg-slate-900/50`,children:(0,v.jsxs)(`tr`,{children:[(0,v.jsx)(`th`,{className:`px-6 py-3 text-[10px] font-bold text-slate-400 uppercase tracking-wider`,children:`Status`}),(0,v.jsx)(`th`,{className:`px-6 py-3 text-[10px] font-bold text-slate-400 uppercase tracking-wider`,children:`Name`}),(0,v.jsx)(`th`,{className:`px-6 py-3 text-[10px] font-bold text-slate-400 uppercase tracking-wider`,children:`Size`}),(0,v.jsx)(`th`,{className:`px-6 py-3 text-[10px] font-bold text-slate-400 uppercase tracking-wider text-right`,children:`Actions`})]})}),(0,v.jsx)(`tbody`,{className:`divide-y divide-slate-100 dark:divide-slate-800`,children:i.map(t=>(0,v.jsxs)(`tr`,{className:`group hover:bg-slate-50 dark:hover:bg-slate-900/30 transition-colors`,children:[(0,v.jsx)(`td`,{className:`px-6 py-4`,children:t.status===`completed`?(0,v.jsx)(n,{className:`w-5 h-5 text-green-500`}):(0,v.jsx)(f,{className:`w-5 h-5 text-blue-500 animate-spin`})}),(0,v.jsxs)(`td`,{className:`px-6 py-4`,children:[(0,v.jsx)(`div`,{className:`text-sm font-bold text-slate-900 dark:text-white`,children:t.name}),(0,v.jsxs)(`div`,{className:`text-[10px] text-slate-500`,children:[t.date,` at `,t.time]})]}),(0,v.jsx)(`td`,{className:`px-6 py-4`,children:(0,v.jsx)(`span`,{className:`text-xs font-mono text-slate-600 dark:text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded`,children:t.size})}),(0,v.jsx)(`td`,{className:`px-6 py-4 text-right`,children:(0,v.jsxs)(`div`,{className:`flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity`,children:[(0,v.jsx)(`button`,{onClick:()=>a(t),className:`p-2 hover:bg-indigo-50 dark:hover:bg-indigo-500/10 text-indigo-600 dark:text-indigo-400 rounded-lg transition-colors`,title:`Download`,children:(0,v.jsx)(e,{className:`w-4 h-4`})}),(0,v.jsx)(`button`,{onClick:()=>o(t),className:`p-2 hover:bg-red-50 dark:hover:bg-red-500/10 text-red-600 dark:text-red-400 rounded-lg transition-colors`,title:`Delete`,children:(0,v.jsx)(m,{className:`w-4 h-4`})})]})})]},t.id))})]})})]})})}function x({isOpen:e,onClose:t,providers:r,selectedProviderId:i,onSelectProvider:s,onUpdateProvider:c,onSave:l,saving:u,saveStatus:d,frequency:m,hour:g,onUpdateSchedule:_}){if(!e)return null;let y=r.find(e=>e.id===i);return(0,v.jsx)(`div`,{className:`fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200`,children:(0,v.jsxs)(`div`,{className:`bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-3xl shadow-2xl w-full max-w-lg overflow-hidden animate-in zoom-in-95 duration-200`,children:[(0,v.jsxs)(`div`,{className:`px-6 py-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between bg-slate-50/50 dark:bg-slate-900/50`,children:[(0,v.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,v.jsx)(`div`,{className:`p-2 bg-indigo-500 rounded-xl`,children:(0,v.jsx)(o,{className:`w-5 h-5 text-white`})}),(0,v.jsx)(`h3`,{className:`font-bold text-slate-900 dark:text-white`,children:`Cloud Configuration`})]}),(0,v.jsx)(`button`,{onClick:t,className:`p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition-colors`,children:(0,v.jsx)(h,{className:`w-5 h-5 text-slate-400`})})]}),(0,v.jsxs)(`div`,{className:`p-6 space-y-6`,children:[(0,v.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,v.jsxs)(`div`,{children:[(0,v.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2`,children:`Frequency`}),(0,v.jsxs)(`select`,{value:m,onChange:e=>_(`frequency`,e.target.value),className:`w-full bg-slate-100 dark:bg-slate-800 border-none rounded-xl px-4 py-3 text-sm font-medium focus:ring-2 focus:ring-indigo-500 transition-all outline-none`,children:[(0,v.jsx)(`option`,{value:`daily`,children:`Daily`}),(0,v.jsx)(`option`,{value:`weekly`,children:`Weekly`}),(0,v.jsx)(`option`,{value:`monthly`,children:`Monthly`})]})]}),(0,v.jsxs)(`div`,{children:[(0,v.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2`,children:`Backup Time`}),(0,v.jsx)(`select`,{value:g,onChange:e=>_(`hour`,e.target.value),className:`w-full bg-slate-100 dark:bg-slate-800 border-none rounded-xl px-4 py-3 text-sm font-medium focus:ring-2 focus:ring-indigo-500 transition-all outline-none`,children:Array.from({length:24}).map((e,t)=>(0,v.jsxs)(`option`,{value:t.toString().padStart(2,`0`),children:[t.toString().padStart(2,`0`),`:00`]},t))})]})]}),(0,v.jsxs)(`div`,{children:[(0,v.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2`,children:`Select Provider`}),(0,v.jsx)(`select`,{value:i,onChange:e=>s(e.target.value),className:`w-full bg-slate-100 dark:bg-slate-800 border-none rounded-xl px-4 py-3 text-sm font-medium focus:ring-2 focus:ring-indigo-500 transition-all outline-none`,children:r.map(e=>(0,v.jsx)(`option`,{value:e.id,children:e.name},e.id))})]}),y&&(0,v.jsxs)(`div`,{className:`space-y-4 animate-in slide-in-from-top-2 duration-300`,children:[(0,v.jsxs)(`div`,{className:`flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl`,children:[(0,v.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,v.jsx)(`div`,{className:`size-2 rounded-full bg-indigo-500 animate-pulse`}),(0,v.jsxs)(`span`,{className:`text-sm font-bold text-slate-700 dark:text-slate-300`,children:[`Enable Backup to `,y.name]})]}),(0,v.jsxs)(`label`,{className:`relative inline-flex items-center cursor-pointer`,children:[(0,v.jsx)(`input`,{type:`checkbox`,checked:y.enabled,onChange:e=>c(y.id,`enabled`,e.target.checked),className:`sr-only peer`}),(0,v.jsx)(`div`,{className:`w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600`})]})]}),y.enabled&&(0,v.jsx)(`div`,{className:`space-y-3`,children:Object.entries(y.config).map(([e,t])=>(0,v.jsxs)(`div`,{children:[(0,v.jsx)(`label`,{className:`block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1.5 ml-1`,children:e.split(`_`).join(` `)}),(0,v.jsxs)(`div`,{className:`relative group`,children:[(0,v.jsx)(a,{className:`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-indigo-500 transition-colors`}),(0,v.jsx)(`input`,{type:e.includes(`secret`)||e.includes(`token`)||e.includes(`key`)?`password`:`text`,value:t,onChange:t=>c(y.id,e,t.target.value),placeholder:`Enter ${e.split(`_`).join(` `)}`,className:`w-full bg-slate-100 dark:bg-slate-800 border-none rounded-xl pl-10 pr-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500 transition-all outline-none`})]})]},e))})]})]}),(0,v.jsxs)(`div`,{className:`p-6 pt-0 flex gap-3`,children:[(0,v.jsx)(`button`,{onClick:t,className:`flex-1 px-4 py-3 bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-2xl font-bold transition-all active:scale-95`,children:`Cancel`}),(0,v.jsxs)(`button`,{onClick:l,disabled:u,className:`flex-[2] px-4 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl font-bold shadow-lg shadow-indigo-500/20 transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center gap-2`,children:[u?(0,v.jsx)(f,{className:`w-4 h-4 animate-spin`}):d===`success`?(0,v.jsx)(n,{className:`w-4 h-4`}):(0,v.jsx)(p,{className:`w-4 h-4`}),u?`Saving...`:d===`success`?`Saved!`:`Save Changes`]})]})]})})}function S(){let[e,n]=(0,_.useState)([]),[r,a]=(0,_.useState)(!1),[o,u]=(0,_.useState)(!0),[p,m]=(0,_.useState)(!1),[h,g]=(0,_.useState)([{id:`google_drive`,name:`Google Drive`,enabled:!1,config:{client_id:``,client_secret:``,refresh_token:``}},{id:`dropbox`,name:`Dropbox`,enabled:!1,config:{access_token:``,app_key:``,app_secret:``}},{id:`aws_s3`,name:`AWS S3`,enabled:!1,config:{access_key_id:``,secret_access_key:``,bucket_name:``,region:`us-east-1`}}]),[S,C]=(0,_.useState)(`google_drive`),[w,T]=(0,_.useState)(!1),[E,D]=(0,_.useState)(`idle`),[O,k]=(0,_.useState)(`daily`),[A,j]=(0,_.useState)(`02`);(0,_.useEffect)(()=>{M(),N()},[]);let M=async()=>{u(!0);try{let e=await fetch(`/root/post/backup/browse`);if(e.ok){let t=await e.json();t.success&&n(t.items||[])}}catch(e){console.error(`Failed to load backups:`,e)}finally{u(!1)}},N=async()=>{try{let e=await fetch(`/root/post/backup/cloud-settings`);if(e.ok){let t=await e.json();t.success&&(t.providers&&g(t.providers),t.schedule&&(k(t.schedule.frequency||`daily`),j(t.schedule.hour||`02`)))}}catch(e){console.error(`Failed to load cloud settings:`,e)}},P=async()=>{T(!0),D(`idle`);try{(await(await fetch(`/root/post/backup/cloud-settings`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({providers:h,schedule:{frequency:O,hour:A}})})).json()).success?(D(`success`),setTimeout(()=>{D(`idle`),m(!1)},1500)):D(`error`)}catch(e){console.error(`Failed to save cloud settings:`,e),D(`error`)}finally{T(!1)}},F=(e,t)=>{e===`frequency`?k(t):j(t)},I=(e,t,n)=>{g(r=>r.map(r=>r.id===e?t===`enabled`?{...r,enabled:n}:{...r,config:{...r.config,[t]:n}}:r))},L=async()=>{a(!0);try{(await(await fetch(`/root/post/backup/create`,{method:`POST`,headers:{"Content-Type":`application/json`}})).json()).success&&M()}catch(e){console.error(`Failed to create backup:`,e)}finally{a(!1)}},R=e=>{window.location.href=`/root/post/backup/download?name=${encodeURIComponent(e.name)}`},z=async e=>{if(confirm(`Are you sure you want to delete ${e.name}?`))try{(await(await fetch(`/root/post/backup/delete`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({name:e.name})})).json()).success&&M()}catch(e){console.error(`Failed to delete backup:`,e)}},B=[{icon:s,label:`Total Backups`,value:e.length.toString(),color:`from-blue-500 to-cyan-500`},{icon:t,label:`Total Size`,value:e.length>0?`${e.length} backups`:`0 B`,color:`from-purple-500 to-pink-500`},{icon:c,label:`Last Backup`,value:e.length>0?`Today`:`Never`,color:`from-green-500 to-emerald-500`},{icon:l,label:`Next Scheduled`,value:`Tomorrow 2:00 AM`,color:`from-orange-500 to-red-500`}];return(0,v.jsxs)(`div`,{className:`flex flex-col h-full bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 shadow-sm rounded-xl overflow-hidden my-6 font-display`,children:[(0,v.jsxs)(`div`,{className:`h-16 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between px-6 bg-white dark:bg-slate-900 flex-shrink-0`,children:[(0,v.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,v.jsx)(`div`,{className:`p-2 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-xl`,children:(0,v.jsx)(s,{className:`w-5 h-5 text-white`})}),(0,v.jsx)(`h2`,{className:`font-bold text-lg text-slate-900 dark:text-white`,children:`Backup Storage`})]}),(0,v.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,v.jsxs)(`button`,{onClick:L,disabled:r,className:`group px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:from-slate-400 disabled:to-slate-500 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/20 transition-all duration-300 hover:scale-105 active:scale-95 disabled:scale-100 disabled:cursor-not-allowed flex items-center gap-2 text-sm`,children:[r?(0,v.jsx)(f,{className:`w-4 h-4 animate-spin`}):(0,v.jsx)(i,{className:`w-4 h-4`}),r?`Creating...`:`Create Backup`]}),(0,v.jsx)(`button`,{onClick:()=>m(!0),className:`p-2 bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl transition-all active:scale-95`,children:(0,v.jsx)(d,{className:`w-5 h-5`})})]})]}),(0,v.jsxs)(`div`,{className:`flex-1 overflow-y-auto custom-scrollbar bg-slate-50/30 dark:bg-slate-900/20`,children:[(0,v.jsx)(y,{stats:B}),(0,v.jsx)(b,{loading:o,backups:e,onDownload:R,onDelete:z})]}),(0,v.jsx)(x,{isOpen:p,onClose:()=>m(!1),providers:h,selectedProviderId:S,onSelectProvider:C,onUpdateProvider:I,onSave:P,saving:w,saveStatus:E,frequency:O,hour:A,onUpdateSchedule:F})]})}export{S as default};